{% load i18n %}
{% load static %}
{% comment %} {% load jsonify %} {% endcomment %}
{% get_current_language as LANGUAGE_CODE %}
{% get_available_languages as LANGUAGES %}
{% get_language_info_list for LANGUAGES as languages %}
<div class="fixed-top">
  <div class="position-relative" style="margin-block-start:50px;">
    <div class="position-absolute top-0 end-0 translate-middle">
      <div class="container">
        <div class="row">
          <div class="col">
            <form action="{% url 'set_language' %}" method="POST">
              {% csrf_token %}
              {% comment %} <input name="next" type="hidden" value="{{ redirect_to }}"> {% endcomment %}
              <select class="form-select form-select-lg mb-3" aria-label=".form-select-lg example" name="language"
                onchange="this.form.submit()">
                {% for language in languages %}
                <option value="{{ language.code }}" {% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                  {{ language.name_local }}
                  {% if LANGUAGE_CODE == 'en' %}
                  <img src="https://ipapi.co/static/images/flags/us.png" />
                  {% else %}
                  <img src="https://ipapi.co/static/images/flags/{{LANGUAGE_CODE}}.png" />
                  {% endif %}
                </option>
                {% endfor %}
              </select>
            </form>
          </div>
          <div class="col-1">
            {% if LANGUAGE_CODE == 'en' %}
            <img style="object-fit: cover;" src="https://ipapi.co/static/images/flags/us.png" />
            {% else %}
            <img style="object-fit: cover;" src="https://ipapi.co/static/images/flags/{{LANGUAGE_CODE}}.png" />
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="fixed-top">
  <div class="position-relative">
    <div class="position-absolute end-0">
      <div class="C0mplexButton float-end">
        {% if type == 'type' %}
        <a href="/">
          <span></span>
          <span></span>
          <span></span>
          <span></span>
          X
        </a>
        {% endif %}
        {% if type == 'group' %}
        <a href="/tests">
          <span></span>
          <span></span>
          <span></span>
          <span></span>
          X
        </a>
        {% endif %}
        {% if type == 'book' %}
        {% verbatim %}
        <a href="/tests?type_id={{type_data.type_id}}">
          <span></span>
          <span></span>
          <span></span>
          <span></span>
          X
        </a>
        {% endverbatim %}
        {% endif %}
        {% if type == 'topic' %}
        {% verbatim %}
        <a href="/tests?group_id={{type_data.group_id}}">
          <span></span>
          <span></span>
          <span></span>
          <span></span>
          X
        </a>
        {% endverbatim %}
        {% endif %}
      </div>
    </div>
  </div>
</div>
<!DOCTYPE html>
<html lang="en">

<head>
  <script type="text/javascript">
    (function (c, l, a, r, i, t, y) {
      c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
      t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
      y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
    })(window, document, "clarity", "script", "e815a36ng3");
  </script>
  <!-- Yandex.Metrika counter -->
  <script type="text/javascript">
    (function (m, e, t, r, i, k, a) {
      m[i] = m[i] || function () { (m[i].a = m[i].a || []).push(arguments) };
      m[i].l = 1 * new Date();
      for (var j = 0; j < document.scripts.length; j++) { if (document.scripts[j].src === r) { return; } }
      k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
    })
      (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(90624869, "init", {
      clickmap: true,
      trackLinks: true,
      accurateTrackBounce: true
    });
  </script>
  <noscript>
    <div><img src="https://mc.yandex.ru/watch/90624869" style="position:absolute; inset-inline-start:-9999px;" alt="" />
    </div>
  </noscript>
  <!-- /Yandex.Metrika counter -->
  <!-- Yandex.RTB -->
  <script>window.yaContextCb = window.yaContextCb || []</script>
  <script src="https://yandex.ru/ads/system/context.js" async></script>
  <meta name="yandex-verification" content="6bd5e2cc7d84e7b1" />
  <meta charset="UTF-8">
  <title>
    {% if request.LANGUAGE_CODE == 'uz' %}
    Testlar {{type}}>
    {% else %}
    {% if request.LANGUAGE_CODE == 'ru' %}
    Тесты {{type}}
    {% else %}
    Tests {{type}}
    {% endif %}
    {% endif %}
    {% if request.LANGUAGE_CODE == 'uz' %}
    {% verbatim %}
    {{type_data.name_uz_uz}}
    {% endverbatim %}
    {% else %}
    {% if request.LANGUAGE_CODE == 'ru' %}
    {% verbatim %}
    {{type_data.name_ru_ru}}
    {% endverbatim %}
    {% else %}
    {% verbatim %}
    {{type_data.id}}
    {{type_data.name_en_us}}
    {% endverbatim %}
    {% endif %}
    {% endif %}
  </title>
  {% if request.LANGUAGE_CODE == 'uz' %}
  <meta name="description" content="Testlar {{type}}" />
  {% else %}
  {% if request.LANGUAGE_CODE == 'ru' %}
  <meta name="description" content="Тесты {{type}}" />
  {% else %}
  <meta name="description" content="Tests {{type}}" />
  {% endif %}
  {% endif %}
  {% if request.LANGUAGE_CODE == 'uz' %}
  {% verbatim %}
  <meta name="description" content="{{type_data.name_uz_uz}}" />
  {% endverbatim %}
  {% else %}
  {% if request.LANGUAGE_CODE == 'ru' %}
  {% verbatim %}
  <meta name="description" content="{{type_data.name_ru_ru}}" />
  {% endverbatim %}
  {% else %}
  {% verbatim %}
  <meta name="description" content="{{type_data.name_en_us}}" />
  {% endverbatim %}
  {% endif %}
  {% endif %}
  <meta property="og:image" content="/media/projects/images/test.png" />
  <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4137874891184814" crossorigin="anonymous"></script> -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7773722896374259"
    crossorigin="anonymous"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-8DHWL20H58"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-8DHWL20H58');
  </script>
  <!-- Google Tag Manager -->
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-NW763C2');</script>
  <!-- End Google Tag Manager -->
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-analytics.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyDpWaFi5QLTNc-yY0ieMKJtGOmbm2ofBm4",
      authDomain: "c0mplex.firebaseapp.com",
      projectId: "c0mplex",
      storageBucket: "c0mplex.appspot.com",
      messagingSenderId: "755681568857",
      appId: "1:755681568857:web:102b1b733df55baefe2948",
      measurementId: "G-H8XGTS4B9J"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
  </script>
  <link rel="icon" sizes="16x16" href="/static/img/avtotest.png">
  <link rel="stylesheet" href="/static/css/C0mplexButtonStyle.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css" />
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css" />
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/semantic.min.css" />
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.min.css" />
  <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
    integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twbs-pagination/1.4.2/jquery.twbsPagination.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"
    integrity="sha512-KZmyTq3PLx9EZl0RHShHQuXtrvdJ+m35tuOiwlcZfs/rE7NZv29ygNA8SFCkMXTnYZQK2OX0Gm2qKGfvWEtRXA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <style>
    /* Three.js Canvas Background */
    #threejs-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      z-index: -1;
      opacity: 0.25;
    }

    [data-theme="dark"] #threejs-canvas {
      opacity: 0.35;
    }

    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

    :root {
      /* Modern 3D Color Palette */
      --bg-color: #f8fafc;
      --text-color: #0f172a;
      --card-bg: rgba(255, 255, 255, 0.85);
      --border-color: rgba(99, 102, 241, 0.2);

      /* Enhanced Gradients */
      --primary-gradient: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #ec4899 100%);
      --secondary-gradient: linear-gradient(135deg, #f472b6 0%, #f59e0b 100%);
      --accent-gradient: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
      --hero-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

      /* 3D Shadow Effects */
      --card-shadow: 0 12px 40px rgba(99, 102, 241, 0.15), 0 4px 12px rgba(0, 0, 0, 0.08);
      --card-shadow-hover: 0 20px 60px rgba(99, 102, 241, 0.25), 0 8px 20px rgba(0, 0, 0, 0.12);
      --card-shadow-3d: 0 15px 45px rgba(99, 102, 241, 0.2), 0 5px 15px rgba(0, 0, 0, 0.1), inset 0 -2px 5px rgba(0, 0, 0, 0.05);

      /* Glassmorphism */
      --glass-bg: rgba(255, 255, 255, 0.35);
      --glass-border: rgba(255, 255, 255, 0.25);

      /* Status Colors */
      --success-color: #10b981;
      --danger-color: #ef4444;
      --warning-color: #f59e0b;
      --info-color: #06b6d4;

      /* 3D Transform Perspective */
      --perspective: 1200px;
      --rotate-x: 5deg;
      --rotate-y: 5deg;

      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    [data-theme="dark"] {
      --bg-color: #0a0a1a;
      --text-color: #f1f5f9;
      --card-bg: rgba(30, 30, 46, 0.85);
      --border-color: rgba(129, 140, 248, 0.3);
      --card-shadow: 0 12px 40px rgba(0, 0, 0, 0.4), 0 4px 12px rgba(129, 140, 248, 0.1);
      --card-shadow-hover: 0 20px 60px rgba(0, 0, 0, 0.5), 0 8px 20px rgba(129, 140, 248, 0.2);
      --card-shadow-3d: 0 15px 45px rgba(0, 0, 0, 0.5), 0 5px 15px rgba(129, 140, 248, 0.15), inset 0 -2px 5px rgba(0, 0, 0, 0.3);
      --glass-bg: rgba(30, 30, 46, 0.45);
      --glass-border: rgba(129, 140, 248, 0.2);
      --primary-gradient: linear-gradient(135deg, #818cf8 0%, #a78bfa 50%, #f472b6 100%);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      line-height: 1.6;
      overflow-x: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Enhanced 3D Background with Animated Gradients */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background:
        radial-gradient(circle at 20% 80%, rgba(99, 102, 241, 0.25) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(236, 72, 153, 0.25) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(139, 92, 246, 0.2) 0%, transparent 50%),
        radial-gradient(circle at 60% 60%, rgba(6, 182, 212, 0.15) 0%, transparent 50%);
      z-index: -1;
      pointer-events: none;
      animation: backgroundPulse 20s ease-in-out infinite;
    }

    @keyframes backgroundPulse {

      0%,
      100% {
        opacity: 1;
        transform: scale(1);
      }

      50% {
        opacity: 0.8;
        transform: scale(1.05);
      }
    }

    /* Floating 3D Particles */
    body::after {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image:
        radial-gradient(circle, rgba(99, 102, 241, 0.4) 2px, transparent 2px),
        radial-gradient(circle, rgba(236, 72, 153, 0.3) 1px, transparent 1px);
      background-size: 200px 200px, 150px 150px;
      background-position: 0 0, 50px 50px;
      z-index: -1;
      pointer-events: none;
      opacity: 0.3;
      animation: particleFloat 60s linear infinite;
    }

    @keyframes particleFloat {
      0% {
        transform: translateY(0) translateX(0);
      }

      100% {
        transform: translateY(-100px) translateX(100px);
      }
    }

    .wrapper {
      margin: 60px auto;
      text-align: center;
      max-width: 800px;
      padding: 0 20px;
    }

    /* Enhanced 3D Page Content Card */
    .page-content {
      background: var(--glass-bg);
      backdrop-filter: blur(24px) saturate(180%);
      -webkit-backdrop-filter: blur(24px) saturate(180%);
      border: 1px solid var(--glass-border);
      border-radius: 28px;
      box-shadow: var(--card-shadow-3d);
      display: inline-block;
      padding: 2rem;
      width: 100%;
      max-width: 660px;
      margin: 20px 0;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      transform-style: preserve-3d;
      perspective: var(--perspective);
    }

    .page-content::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--primary-gradient);
      opacity: 0;
      transition: opacity 0.5s ease;
      border-radius: 28px;
      z-index: -1;
    }

    .page-content::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg,
          transparent 30%,
          rgba(255, 255, 255, 0.15) 50%,
          transparent 70%);
      transform: translateX(-100%) translateY(-100%) rotate(45deg);
      transition: transform 0.8s ease;
    }

    .page-content:hover {
      transform: translateY(-8px) translateZ(20px) rotateX(2deg);
      box-shadow: var(--card-shadow-hover);
      border-color: rgba(99, 102, 241, 0.4);
    }

    .page-content:hover::before {
      opacity: 0.08;
    }

    .page-content:hover::after {
      transform: translateX(100%) translateY(100%) rotate(45deg);
    }

    .alertify-log-custom {
      background: var(--warning-color);
      border-radius: 12px;
      box-shadow: var(--card-shadow);
    }

    .poin:hover {
      cursor: pointer;
      transform: scale(1.05);
      transition: transform 0.2s ease;
    }

    .disabledDiv {
      pointer-events: none;
      opacity: 0.4;
      filter: grayscale(50%);
    }

    .container {
      margin-top: 20px;
      position: relative;
      z-index: 1;
    }

    .page {
      display: none;
    }

    .page-active {
      display: block;
      animation: fadeInUp 0.6s ease-out;
    }

    section {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 2rem 0;
    }

    h1 {
      font-family: 'Inter', sans-serif;
      font-size: clamp(2rem, 5vw, 4rem);
      font-weight: 800;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 1rem;
      text-align: center;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
    }

    [data-theme="dark"] h1 {
      filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.3));
    }

    /* Enhanced 3D Timer with Maximum Visibility */
    #timer {
      backdrop-filter: blur(24px) saturate(180%);
      -webkit-backdrop-filter: blur(24px) saturate(180%);
      background: linear-gradient(135deg,
          rgba(99, 102, 241, 0.25),
          rgba(236, 72, 153, 0.25),
          rgba(245, 158, 11, 0.2));
      border: 3px solid rgba(99, 102, 241, 0.6);
      border-radius: 50px;
      padding: 1.2rem 2.5rem;
      font-size: 2.4rem;
      font-weight: 900;
      color: #0f172a;
      box-shadow:
        var(--card-shadow-3d),
        inset 0 2px 10px rgba(255, 255, 255, 0.3);
      margin: 1rem 0;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transform-style: preserve-3d;
      letter-spacing: 0.08em;
      text-shadow:
        0 2px 4px rgba(255, 255, 255, 0.8),
        0 4px 12px rgba(0, 0, 0, 0.2),
        0 -1px 2px rgba(255, 255, 255, 0.5);
    }

    [data-theme="dark"] #timer {
      background: linear-gradient(135deg,
          rgba(129, 140, 248, 0.35),
          rgba(244, 114, 182, 0.35),
          rgba(251, 191, 36, 0.3));
      border: 3px solid rgba(129, 140, 248, 0.7);
      color: #f1f5f9;
      box-shadow:
        0 15px 45px rgba(0, 0, 0, 0.5),
        0 5px 15px rgba(129, 140, 248, 0.3),
        inset 0 2px 10px rgba(255, 255, 255, 0.1);
      text-shadow:
        0 2px 8px rgba(0, 0, 0, 0.8),
        0 0 20px rgba(129, 140, 248, 0.5),
        0 -1px 2px rgba(255, 255, 255, 0.2);
    }

    #timer::before {
      content: '';
      position: absolute;
      inset: 0;
      background: var(--secondary-gradient);
      opacity: 0;
      transition: opacity 0.5s ease;
      border-radius: 50px;
      z-index: -1;
    }

    #timer::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg,
          transparent 30%,
          rgba(255, 255, 255, 0.2) 50%,
          transparent 70%);
      transform: translateX(-100%) translateY(-100%) rotate(45deg);
      transition: transform 0.8s ease;
    }

    #timer:hover {
      transform: translateY(-4px) translateZ(15px) scale(1.08);
      box-shadow: var(--card-shadow-hover);
      border-color: rgba(245, 158, 11, 0.5);
    }

    #timer:hover::before {
      opacity: 0.15;
    }

    #timer:hover::after {
      transform: translateX(100%) translateY(100%) rotate(45deg);
    }

    #timer:active {
      transform: translateY(-2px) translateZ(10px) scale(1.04);
      transition: all 0.1s ease;
    }

    /* Enhanced 3D Question Container */
    .question-container {
      background: var(--glass-bg);
      backdrop-filter: blur(24px) saturate(180%);
      -webkit-backdrop-filter: blur(24px) saturate(180%);
      border: 1px solid var(--glass-border);
      border-radius: 28px;
      box-shadow: var(--card-shadow-3d);
      padding: 2rem;
      margin: 2rem 0;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      transform-style: preserve-3d;
      perspective: var(--perspective);
    }

    .question-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--accent-gradient);
      opacity: 0;
      transition: opacity 0.5s ease;
      border-radius: 28px;
      z-index: -1;
    }

    .question-container:hover {
      transform: translateY(-6px) translateZ(15px) scale(1.01);
      box-shadow: var(--card-shadow-hover);
      border-color: rgba(6, 182, 212, 0.4);
    }

    .question-container:hover::before {
      opacity: 0.05;
    }

    .question-image {
      max-width: 100%;
      height: auto;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      margin: 1rem 0;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .question-image:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 30px rgba(0, 0, 0, 0.15);
    }

    /* Modal styles for image preview */
    .image-modal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      animation: fadeIn 0.3s ease;
    }

    .image-modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-content-image {
      max-width: 90%;
      max-height: 90%;
      object-fit: contain;
      border-radius: 12px;
      box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
      animation: zoomIn 0.3s ease;
    }

    .modal-close {
      position: absolute;
      top: 30px;
      right: 40px;
      color: #fff;
      font-size: 50px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
      z-index: 10000;
    }

    .modal-close:hover {
      color: #06b6d4;
      transform: scale(1.1) rotate(90deg);
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes zoomIn {
      from {
        transform: scale(0.5);
        opacity: 0;
      }

      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    /* Enhanced 3D Answer Options */
    .list-group-item {
      background: var(--glass-bg);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid var(--glass-border);
      border-radius: 18px;
      margin: 0.75rem 0;
      padding: 1.2rem 1.8rem;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transform-style: preserve-3d;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    }

    .list-group-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--primary-gradient);
      opacity: 0;
      transition: opacity 0.4s ease;
      z-index: 1;
    }

    .list-group-item::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      width: 0;
      height: 100%;
      background: linear-gradient(90deg,
          rgba(99, 102, 241, 0.2),
          transparent);
      transform: translateY(-50%);
      transition: width 0.4s ease;
      z-index: 0;
    }

    .list-group-item:hover:not(.disabledDiv) {
      transform: translateX(12px) translateZ(10px) scale(1.02);
      box-shadow: 0 12px 35px rgba(99, 102, 241, 0.2), 0 6px 15px rgba(0, 0, 0, 0.1);
      border-color: rgba(99, 102, 241, 0.4);
    }

    .list-group-item:hover:not(.disabledDiv)::before {
      opacity: 0.12;
    }

    .list-group-item:hover:not(.disabledDiv)::after {
      width: 100%;
    }

    .list-group-item:active:not(.disabledDiv) {
      transform: translateX(8px) translateZ(5px) scale(1.01);
      transition: all 0.1s ease;
    }

    .list-group-item>* {
      position: relative;
      z-index: 2;
    }

    /* Success/Error states */
    .list-group-item-success {
      background: var(--success-color) !important;
      color: white !important;
      border-color: var(--success-color) !important;
      transform: scale(1.02);
    }

    .list-group-item-danger {
      background: var(--danger-color) !important;
      color: white !important;
      border-color: var(--danger-color) !important;
      transform: scale(1.02);
    }

    /* Enhanced 3D Pagination with Better Visibility */
    .pagination {
      justify-content: center;
      margin: 2rem 0;
      gap: 0.5rem;
    }

    .page-link {
      background: linear-gradient(135deg,
          rgba(255, 255, 255, 0.95),
          rgba(255, 255, 255, 0.85)) !important;
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border: 3px solid rgba(99, 102, 241, 0.7) !important;
      color: #1e293b !important;
      border-radius: 14px;
      margin: 0 4px;
      padding: 0.75rem 1.2rem;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      transform-style: preserve-3d;
      box-shadow:
        0 6px 16px rgba(99, 102, 241, 0.25),
        0 2px 6px rgba(0, 0, 0, 0.1),
        inset 0 2px 4px rgba(255, 255, 255, 0.8) !important;
      font-weight: 900 !important;
      font-size: 1.1rem !important;
      text-shadow:
        0 1px 2px rgba(255, 255, 255, 1),
        0 2px 6px rgba(0, 0, 0, 0.3),
        0 -1px 1px rgba(255, 255, 255, 0.8) !important;
      line-height: 1;
    }

    [data-theme="dark"] .page-link {
      background: linear-gradient(135deg,
          rgba(51, 65, 85, 1),
          rgba(30, 41, 59, 0.95)) !important;
      border: 3px solid rgba(129, 140, 248, 0.8) !important;
      color: #f8fafc !important;
      box-shadow:
        0 6px 16px rgba(0, 0, 0, 0.5),
        0 3px 8px rgba(129, 140, 248, 0.3),
        inset 0 2px 4px rgba(255, 255, 255, 0.15) !important;
      text-shadow:
        0 2px 4px rgba(0, 0, 0, 1),
        0 0 15px rgba(129, 140, 248, 0.6),
        0 -1px 2px rgba(255, 255, 255, 0.3) !important;
    }

    .page-link::before {
      content: '';
      position: absolute;
      inset: 0;
      opacity: 0;
      transition: opacity 0.4s ease;
      border-radius: 14px;
    }

    .page-link:hover {
      color: white !important;
      transform: translateY(-3px) translateZ(10px);
      box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4), 0 4px 10px rgba(0, 0, 0, 0.2) !important;
      border-color: rgba(99, 102, 241, 0.8) !important;
      text-shadow: 0 2px 6px rgba(0, 0, 0, 0.4) !important;
    }

    .page-link:hover::before {
      opacity: 1;
    }

    [data-theme="dark"] .page-link:hover {
      box-shadow: 0 8px 25px rgba(129, 140, 248, 0.5), 0 4px 10px rgba(0, 0, 0, 0.4) !important;
      border-color: rgba(129, 140, 248, 1) !important;
    }

    .page-link:active {
      transform: translateY(-1px) translateZ(5px);
      transition: all 0.1s ease;
    }

    .page-item.active .page-link {
      background: var(--primary-gradient);
      border-color: rgba(99, 102, 241, 0.6);
      box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4), 0 3px 8px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px) translateZ(8px);
      font-weight: 700;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    }

    .page-item.active .page-link::before {
      opacity: 1;
    }

    [data-theme="dark"] .page-item.active .page-link {
      border-color: rgba(129, 140, 248, 0.6);
      box-shadow: 0 6px 20px rgba(129, 140, 248, 0.5), 0 3px 8px rgba(0, 0, 0, 0.3);
    }

    /* Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideInFromLeft {
      from {
        opacity: 0;
        transform: translateX(-50px);
      }

      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes slideInFromRight {
      from {
        opacity: 0;
        transform: translateX(50px);
      }

      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .wrapper {
        margin: 20px auto;
        padding: 0 10px;
      }

      .page-content {
        padding: 1.5rem;
        margin: 10px 0;
      }

      .question-container {
        padding: 1.5rem;
        margin: 1rem 0;
      }

      #timer {
        font-size: 1.5rem;
        padding: 0.8rem 1.5rem;
      }

      /* Theme toggle mobile */
      .theme-toggle {
        width: 50px;
        height: 50px;
        top: 15px;
        right: 15px;
      }

      .theme-toggle i {
        font-size: 1.2rem;
      }

      .theme-toggle-text {
        font-size: 0.6rem;
        bottom: -20px;
      }
    }

    @media (max-width: 480px) {
      .theme-toggle {
        width: 45px;
        height: 45px;
        top: 10px;
        right: 10px;
      }

      .theme-toggle i {
        font-size: 1rem;
      }

      .theme-toggle-text {
        font-size: 0.5rem;
        bottom: -18px;
      }
    }
  </style>
  <style>
    /* Hero Section for Tests */
    .tests-hero {
      background: var(--primary-gradient);
      padding: 80px 0 60px;
      margin-bottom: 50px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .tests-hero::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background:
        radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 70% 80%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
      z-index: 0;
    }

    .tests-hero-content {
      position: relative;
      z-index: 1;
      max-width: 800px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .tests-hero-title {
      font-size: clamp(2.5rem, 6vw, 4rem);
      font-weight: 800;
      margin-bottom: 20px;
      background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .tests-hero-subtitle {
      font-size: clamp(1.1rem, 3vw, 1.3rem);
      color: rgba(255, 255, 255, 0.9);
      font-weight: 400;
      margin-bottom: 30px;
      line-height: 1.6;
    }

    #services .services {
      flex-direction: column;
      text-align: center;
      max-width: 1500px;
      margin: 0 auto;
      padding: 100px 0;
    }

    #services .service-top {
      max-width: 500px;
      margin: 0 auto;
    }

    #services .service-bottom {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 50px;
      gap: 2rem;
    }

    /* Enhanced 3D Service Cards */
    #services .service-item {
      flex-basis: calc(25% - 2rem);
      min-width: 280px;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      flex-direction: column;
      padding: 2rem;
      border-radius: 28px;
      background: var(--glass-bg);
      backdrop-filter: blur(24px) saturate(180%);
      -webkit-backdrop-filter: blur(24px) saturate(180%);
      border: 1px solid var(--glass-border);
      box-shadow: var(--card-shadow-3d);
      margin: 0;
      position: relative;
      z-index: 1;
      overflow: hidden;
      height: 350px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      transform-style: preserve-3d;
      perspective: var(--perspective);
    }

    /* 3D Glow Effect on Hover */
    #services .service-item::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: radial-gradient(circle, rgba(99, 102, 241, 0.4), transparent 70%);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
      z-index: 0;
    }

    /* Dark mode for service-item */
    [data-theme="dark"] #services .service-item {
      background: rgba(30, 30, 46, 0.4);
      border-color: rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    [data-theme="dark"] #services .service-item:hover {
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
      border-color: rgba(255, 255, 255, 0.2);
    }

    #services .service-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--primary-gradient);
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 1;
      border-radius: 24px;
    }

    /* Enhanced 3D Hover Effects */
    #services .service-item:hover {
      transform: translateY(-12px) translateZ(30px) rotateX(3deg) rotateY(2deg) scale(1.03);
      box-shadow: var(--card-shadow-hover);
      border-color: rgba(99, 102, 241, 0.5);
    }

    #services .service-item:hover::before {
      opacity: 0.15;
    }

    #services .service-item:hover::after {
      width: 400px;
      height: 400px;
    }

    /* Active/Click State */
    #services .service-item:active {
      transform: translateY(-8px) translateZ(20px) scale(1.01);
      transition: all 0.1s ease;
    }

    /* Enhanced 3D Icon Container */
    #services .service-item .icon {
      width: 120px;
      height: 120px;
      margin-bottom: 20px;
      border-radius: 20px;
      overflow: hidden;
      position: relative;
      z-index: 2;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 8px 25px rgba(99, 102, 241, 0.2), 0 4px 10px rgba(0, 0, 0, 0.1);
      transform-style: preserve-3d;
      border: 2px solid rgba(255, 255, 255, 0.2);
    }

    #services .service-item .icon::before {
      content: '';
      position: absolute;
      inset: 0;
      background: var(--primary-gradient);
      opacity: 0;
      transition: opacity 0.5s ease;
      z-index: 1;
      mix-blend-mode: overlay;
    }

    #services .service-item:hover .icon {
      transform: scale(1.15) translateZ(20px) rotateY(5deg);
      box-shadow: 0 12px 35px rgba(99, 102, 241, 0.35), 0 6px 15px rgba(0, 0, 0, 0.15);
      border-color: rgba(99, 102, 241, 0.4);
    }

    #services .service-item:hover .icon::before {
      opacity: 0.2;
    }

    #services .service-item .icon img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 16px;
      transition: all 0.3s ease;
    }

    /* Dark mode for icons */
    [data-theme="dark"] #services .service-item .icon {
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }

    [data-theme="dark"] #services .service-item:hover .icon {
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
    }

    #services .service-item h2 {
      font-size: 1.5rem;
      color: var(--text-color);
      margin-bottom: 10px;
      text-transform: uppercase;
      font-weight: 700;
      position: relative;
      z-index: 2;
      transition: all 0.3s ease;
    }

    #services .service-item:hover h2 {
      color: #ffffff;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      transform: translateY(-2px);
    }

    #services .service-item p {
      color: var(--text-color);
      text-align: start;
      opacity: 0.7;
      position: relative;
      z-index: 2;
      transition: all 0.3s ease;
    }

    #services .service-item:hover p {
      color: rgba(255, 255, 255, 0.9);
      opacity: 1;
    }

    /* Dark mode text colors */
    [data-theme="dark"] #services .service-item h2 {
      color: #ffffff;
    }

    [data-theme="dark"] #services .service-item p {
      color: rgba(255, 255, 255, 0.8);
    }

    [data-theme="dark"] #services .service-item:hover h2 {
      color: #ffffff;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
    }

    [data-theme="dark"] #services .service-item:hover p {
      color: rgba(255, 255, 255, 0.95);
      opacity: 1;
    }

    #services .service-item .C0mplexButton {
      position: relative;
      z-index: 2;
      margin-top: auto;
    }

    /* Responsive adjustments */
    @media (max-width: 1200px) {
      #services .service-item {
        flex-basis: calc(33.333% - 2rem);
      }
    }

    @media (max-width: 768px) {
      #services .service-item {
        flex-basis: calc(50% - 1rem);
        min-width: 250px;
        height: 300px;
        padding: 1.5rem;
      }

      #services .service-item .icon {
        width: 80px;
        height: 80px;
      }

      #services .service-item h2 {
        font-size: 1.2rem;
      }

      /* Dark mode mobile adjustments */
      [data-theme="dark"] #services .service-item {
        background: rgba(30, 30, 46, 0.5);
        border-color: rgba(255, 255, 255, 0.15);
      }
    }

    @media (max-width: 480px) {
      #services .service-item {
        flex-basis: 100%;
        min-width: 100%;
        height: 280px;
        padding: 1rem;
      }

      /* Dark mode mobile small adjustments */
      [data-theme="dark"] #services .service-item {
        background: rgba(30, 30, 46, 0.6);
        border-color: rgba(255, 255, 255, 0.2);
      }
    }
  </style>

  <style>
    :root {
      --bg-color: #ffffff;
      --text-color: #212121;
      --card-bg: #ffffff;
      --border-color: #e0e0e0;
      transition: all 0.3s ease;
    }

    [data-theme="dark"] {
      --bg-color: #212121;
      --text-color: #ffffff;
      --card-bg: #2d2d2d;
      --border-color: #444;
    }

    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      transition: all 0.3s ease;
    }

    .card {
      background-color: var(--card-bg);
      border-color: var(--border-color);
    }

    /* Add table styles for dark mode */
    [data-theme="dark"] .table {
      color: var(--text-color);
    }

    [data-theme="dark"] .table-hover tbody tr:hover {
      background-color: rgba(255, 255, 255, 0.075);
      color: var(--text-color);
    }

    [data-theme="dark"] .table thead th {
      color: var(--text-color);
      border-bottom-color: var(--border-color);
    }

    [data-theme="dark"] .table td {
      border-color: var(--border-color);
    }

    .theme-toggle {
      position: fixed;
      top: 20px;
      left: 20px;
      padding: 8px 12px;
      border-radius: 5px;
      border: 1px solid var(--border-color);
      background: var(--card-bg);
      color: var(--text-color);
      cursor: pointer;
      z-index: 1000;
    }
  </style>
  <script>
    // Initialize theme on page load
    document.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
      updateThemeButton(savedTheme);
    });

    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';

      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);

      // Tugmani yangilash
      updateThemeButton(newTheme);

      // Tugma animatsiyasi
      const button = document.getElementById('themeButton');
      button.style.transform = 'scale(0.95)';
      setTimeout(() => {
        button.style.transform = '';
      }, 150);
    }

    function updateThemeButton(theme) {
      const button = document.getElementById('themeButton');
      const icon = theme === 'light' ? 'fa-moon' : 'fa-sun';
      const text = theme === 'light' ? 'Tun' : 'Kun';
      const title = theme === 'light' ? 'Tun rejimiga o\'tish' : 'Kun rejimiga o\'tish';

      button.innerHTML = `<i class="fas ${icon}"></i><span class="theme-toggle-text">${text}</span>`;
      button.title = title;
    }
  </script>
  <!-- Theme toggle tugmasini yangilash -->
  <button id="themeButton" class="theme-toggle" onclick="toggleTheme()" title="Kun/Tun rejimini o'zgartirish">
    <i class="fas fa-moon"></i>
    <span class="theme-toggle-text">Tun</span>
  </button>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      /* Color variables */
      --primary-color: #0072e5;
      --secondary-color: #475569;
      --success-color: #22c55e;
      --danger-color: #ef4444;
      --warning-color: #f59e0b;
      --info-color: #3399ff;

      /* Light theme */
      --bg-color: #ffffff;
      --text-color: #1e293b;
      --card-bg: #ffffff;
      --border-color: #e2e8f0;
      --shadow-color: rgba(0, 0, 0, 0.1);
      --question-bg: #ffffff;
      --option-bg: #f8fafc;
      --option-hover: #f1f5f9;
      --option-border: #e2e8f0;
      --option-text: #1e293b;
    }

    [data-theme="dark"] {
      --bg-color: #0a1929;
      --text-color: #e7ebf0;
      --card-bg: #132f4c;
      --border-color: #1e4976;
      --shadow-color: rgba(0, 0, 0, 0.4);
      --question-bg: #132f4c;
      --option-bg: #173a5e;
      --option-hover: #1e4976;
      --option-border: #265d97;
      --option-text: #e7ebf0;
      --primary-color: #3399ff;
    }

    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      transition: all 0.3s ease;
    }

    .card {
      background-color: var(--card-bg);
      border-color: var(--border-color);
      box-shadow: 0 4px 6px var(--shadow-color);
    }

    .page-content {
      background-color: var(--card-bg) !important;
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* List group styles */
    .list-group-item {
      background-color: var(--option-bg);
      color: var(--option-text);
      border-color: var(--option-border);
      transition: all 0.2s ease;
    }

    .list-group-item:hover:not(.disabledDiv) {
      background-color: var(--option-hover);
      border-color: var(--option-border);
      transform: translateX(8px);
    }

    /* CSS logical properties */
    .table thead th {
      border-block-end-color: var(--border-color);
    }

    [dir="ltr"] .list-group-item:hover:not(.disabledDiv) {
      transform: translateX(var(--spacing-sm));
    }

    [dir="rtl"] .list-group-item:hover:not(.disabledDiv) {
      transform: translateX(calc(var(--spacing-sm) * -1));
    }

    /* Enhanced 3D Theme Toggle Button - Fixed Position */
    .theme-toggle {
      position: fixed !important;
      top: 20px !important;
      right: 20px !important;
      width: 65px;
      height: 65px;
      padding: 0;
      border: 2px solid var(--glass-border);
      border-radius: 50%;
      background: var(--glass-bg);
      backdrop-filter: blur(24px) saturate(180%);
      -webkit-backdrop-filter: blur(24px) saturate(180%);
      color: var(--text-color);
      cursor: pointer;
      box-shadow: var(--card-shadow-3d);
      z-index: 9999 !important;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      font-weight: 600;
      font-size: 1.1rem;
      overflow: hidden;
      transform-style: preserve-3d;
    }

    .theme-toggle::before {
      content: '';
      position: absolute;
      inset: 0;
      background: var(--primary-gradient);
      opacity: 0;
      transition: opacity 0.5s ease;
      border-radius: 50%;
    }

    .theme-toggle::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.4), transparent 70%);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
    }

    .theme-toggle:hover {
      transform: translateY(-5px) translateZ(15px) scale(1.1);
      box-shadow: var(--card-shadow-hover);
      border-color: rgba(99, 102, 241, 0.6);
    }

    .theme-toggle:hover::before {
      opacity: 1;
    }

    .theme-toggle:hover::after {
      width: 120%;
      height: 120%;
    }

    .theme-toggle:active {
      transform: translateY(-2px) translateZ(10px) scale(1.05);
      transition: all 0.1s ease;
    }

    .theme-toggle i {
      font-size: 1.6rem;
      transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      z-index: 1;
    }

    .theme-toggle:hover i {
      transform: rotate(360deg) scale(1.15);
      filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.6));
    }

    /* Theme toggle text - Fixed */
    .theme-toggle-text {
      position: absolute;
      bottom: -25px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.7rem;
      font-weight: 500;
      color: var(--text-color);
      opacity: 0.7;
      white-space: nowrap;
      transition: all 0.3s ease;
      z-index: 10000;
      pointer-events: none;
    }

    .theme-toggle:hover .theme-toggle-text {
      opacity: 1;
      color: white;
    }

    /* Ensure theme toggle stays on top of everything */
    #themeButton {
      position: fixed !important;
      z-index: 10000 !important;
    }

    /* Table styles */
    .table {
      color: var(--text-color);
    }

    .table-hover tbody tr:hover {
      background-color: var(--option-hover);
      color: var(--text-color);
    }

    .table thead th {
      color: var(--text-color);
      border-bottom-color: var(--border-color);
    }

    .table td {
      border-color: var(--border-color);
    }

    /* Success/Error states */
    .list-group-item.list-group-item-success {
      background-color: var(--success-color);
      color: white;
      border-color: transparent;
    }

    .list-group-item.list-group-item-danger {
      background-color: var(--danger-color);
      color: white;
      border-color: transparent;
    }

    /* Enhanced 3D Modal Styles */
    .modal-content {
      background: linear-gradient(135deg,
          rgba(255, 255, 255, 0.95),
          rgba(248, 250, 252, 0.9)) !important;
      backdrop-filter: blur(24px) saturate(180%);
      -webkit-backdrop-filter: blur(24px) saturate(180%);
      border: 2px solid rgba(99, 102, 241, 0.3) !important;
      border-radius: 28px !important;
      box-shadow:
        0 20px 60px rgba(99, 102, 241, 0.25),
        0 8px 24px rgba(0, 0, 0, 0.15),
        inset 0 2px 8px rgba(255, 255, 255, 0.5) !important;
      overflow: hidden;
      transform-style: preserve-3d;
      animation: modalFadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    [data-theme="dark"] .modal-content {
      background: linear-gradient(135deg,
          rgba(30, 30, 46, 0.98),
          rgba(15, 23, 42, 0.95)) !important;
      border: 2px solid rgba(129, 140, 248, 0.4) !important;
      box-shadow:
        0 20px 60px rgba(0, 0, 0, 0.6),
        0 8px 24px rgba(129, 140, 248, 0.2),
        inset 0 2px 8px rgba(255, 255, 255, 0.1) !important;
    }

    .modal-header {
      border-bottom: 2px solid rgba(99, 102, 241, 0.2) !important;
      color: var(--text-color) !important;
      padding: 1.5rem 2rem !important;
      background: linear-gradient(135deg,
          rgba(99, 102, 241, 0.08),
          rgba(236, 72, 153, 0.05));
      position: relative;
      overflow: hidden;
    }

    .modal-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent);
      animation: shimmer 3s infinite;
    }

    [data-theme="dark"] .modal-header {
      border-bottom-color: rgba(129, 140, 248, 0.3) !important;
      background: linear-gradient(135deg,
          rgba(129, 140, 248, 0.12),
          rgba(244, 114, 182, 0.08));
    }

    .modal-header .modal-title {
      font-weight: 800 !important;
      font-size: 1.5rem !important;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      position: relative;
      z-index: 1;
    }

    .modal-body {
      color: var(--text-color) !important;
      padding: 2rem !important;
      position: relative;
      z-index: 1;
    }

    .modal-body>div {
      border-radius: 16px !important;
      padding: 1rem 1.5rem !important;
      margin-bottom: 1rem !important;
      font-weight: 600 !important;
      font-size: 1.1rem !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08) !important;
      transition: all 0.3s ease;
    }

    .modal-body>div:hover {
      transform: translateX(8px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12) !important;
    }

    .modal-footer {
      border-top: 2px solid rgba(99, 102, 241, 0.2) !important;
      padding: 1.5rem 2rem !important;
      background: linear-gradient(135deg,
          rgba(99, 102, 241, 0.05),
          rgba(236, 72, 153, 0.03));
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    [data-theme="dark"] .modal-footer {
      border-top-color: rgba(129, 140, 248, 0.3) !important;
      background: linear-gradient(135deg,
          rgba(129, 140, 248, 0.08),
          rgba(244, 114, 182, 0.05));
    }

    .modal-footer .btn {
      border-radius: 14px !important;
      padding: 0.75rem 1.5rem !important;
      font-weight: 700 !important;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      transform-style: preserve-3d;
    }

    .modal-footer .btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.3), transparent 70%);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
    }

    .modal-footer .btn:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2) !important;
    }

    .modal-footer .btn:hover::before {
      width: 300px;
      height: 300px;
    }

    .modal-footer .btn-outline-secondary {
      border: 2px solid rgba(99, 102, 241, 0.4) !important;
      color: var(--text-color) !important;
    }

    .modal-footer .btn-outline-primary {
      border: 2px solid rgba(99, 102, 241, 0.6) !important;
      color: var(--color-primary) !important;
      background: rgba(99, 102, 241, 0.1) !important;
    }

    .modal-footer .btn-outline-danger {
      border: 2px solid rgba(239, 68, 68, 0.6) !important;
      color: var(--danger-color) !important;
      background: rgba(239, 68, 68, 0.1) !important;
    }

    .modal-footer .btn-outline-success {
      border: 2px solid rgba(16, 185, 129, 0.6) !important;
      color: var(--success-color) !important;
      background: rgba(16, 185, 129, 0.1) !important;
    }

    @keyframes modalFadeIn {
      from {
        opacity: 0;
        transform: scale(0.9) translateY(-20px);
      }

      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    @keyframes shimmer {
      0% {
        left: -100%;
      }

      100% {
        left: 100%;
      }
    }

    /* Modal backdrop enhancement */
    .modal-backdrop {
      backdrop-filter: blur(8px);
      background-color: rgba(15, 23, 42, 0.7) !important;
    }

    [data-theme="dark"] .modal-backdrop {
      background-color: rgba(0, 0, 0, 0.85) !important;
    }
  </style>
</head>

<body ng-app="App" ng-controller="tests">
  <!-- Three.js Background Canvas -->
  <canvas id="threejs-canvas"></canvas>

  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid"
    data-ad-client="ca-pub-7773722896374259" data-ad-slot="2303661293"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  <!-- <ins class="adsbygoogle"
   style="display:block; text-align:center;"
  data-ad-layout="in-article"
  data-ad-format="fluid"
  data-ad-client="ca-pub-4137874891184814"
  data-ad-slot="6832564320"></ins>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
  </script> -->
  <!-- Yandex.RTB R-A-1963742-5 -->
  <script>window.yaContextCb.push(() => {
      Ya.Context.AdvManager.render({
        type: 'fullscreen',
        blockId: 'R-A-1963742-5'
      })
    })</script>
  <!-- Yandex.RTB R-A-18353650-1 -->
  <div id="yandex_rtb_R-A-18353650-1"></div>
  <script>window.yaContextCb.push(() => {
      Ya.Context.AdvManager.render({
        renderTo: 'yandex_rtb_R-A-18353650-1',
        blockId: 'R-A-18353650-1'
      })
    })</script>
  <div id="conn"
    style="visibility:hidden;position:absolute;margin-inline-start:45%;margin-block-start:20%;z-index:9999">
    <img src="/static/img/buffering.gif" />
  </div>
  <input id="hh" type="hidden" />
  <audio id="click" controls="controls" style="position:absolute;visibility:hidden">
    <source src="/static/sounds/click.mp3" type="audio/mpeg" />
  </audio>
  <audio id="right" controls="controls" style="position:absolute;visibility:hidden">
    <source src="/static/sounds/right.mp3" type="audio/mpeg" />
  </audio>
  <audio id="wrong" controls="controls" style="position:absolute;visibility:hidden">
    <source src="/static/sounds/wrong.mp3" type="audio/mpeg" />
  </audio>
  {% if request.LANGUAGE_CODE == 'uz' %}
  {% verbatim %}
  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">{{topic.name_uz_uz}} natijasi</h5>
          <button type="button" ng-show="timeout" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="p-3 mb-2 bg-secondary text-white"
            ng-show="questions.length-togri_javob_soni-notogri_javob_soni!=0">Belgilanmagan savollar :
            {{questions.length-togri_javob_soni-notogri_javob_soni}} ta</div>
          <div class="p-3 mb-2 bg-success text-white"
            ng-show="togri_javob_soni!=0&&notogri_javob_soni!=questions.length">To'g'ri javob : {{togri_javob_soni}} ta
          </div>
          <div class="p-3 mb-2 bg-danger text-white"
            ng-show="notogri_javob_soni!=0&&togri_javob_soni!=questions.length">Noto'g'ri javob : {{notogri_javob_soni}}
            ta</div>
        </div>
        <div class="modal-footer">
          <button type="button" ng-show="timeout" class="btn btn-outline-secondary" style="inline-size:200px"
            data-bs-dismiss="modal"><i class="bi bi-chevron-double-right"></i> Davom etish</button>
          <button type="button" class="btn btn-outline-primary" style="inline-size:200px"
            ng-show="topics.length>topic_number" ng-click="changeTopic(topic_number+1)"><i
              class="bi bi-box-arrow-right"></i> Keyingi biletga o'tish</button>
          <button type="button" class="btn btn-outline-danger" style="inline-size:200px" ng-click="back()"><i
              class="bi bi-backspace"></i> Biletlarga qaytish</button>
          <button type="button" class="btn btn-outline-success" style="inline-size:200px"
            ng-click="changeTopic(topic_number)"><i class="bi bi-arrow-repeat"></i> Boshidan boshlash</button>
        </div>
      </div>
    </div>
  </div>
  {% endverbatim %}
  {% else %}
  {% if request.LANGUAGE_CODE == 'ru' %}
  {% verbatim %}
  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Результат {{topic.name_ru_ru}}</h5>
          <button type="button" ng-show="timeout" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="p-3 mb-2 bg-secondary text-white"
            ng-show="questions.length-togri_javob_soni-notogri_javob_soni!=0">Неотмеченные вопросы:
            {{questions.length-togri_javob_soni-notogri_javob_soni}}</div>
          <div class="p-3 mb-2 bg-success text-white"
            ng-show="togri_javob_soni!=0&&notogri_javob_soni!=questions.length">Правильный ответ: {{togri_javob_soni}}
          </div>
          <div class="p-3 mb-2 bg-danger text-white"
            ng-show="notogri_javob_soni!=0&&togri_javob_soni!=questions.length">Неправильный ответ:
            {{notogri_javob_soni}}</div>
        </div>
        <div class="modal-footer">
          <button type="button" ng-show="timeout" class="btn btn-outline-secondary" style="inline-size:200px"
            data-bs-dismiss="modal"><i class="bi bi-chevron-double-right"></i> Продолжать</button>
          <button type="button" class="btn btn-outline-primary" style="inline-size:200px"
            ng-show="topics.length>topic_number" ng-click="changeTopic(topic_number+1)"><i
              class="bi bi-box-arrow-right"></i> Перейти к следующему билету</button>
          <button type="button" class="btn btn-outline-danger" style="inline-size:200px" ng-click="back()"><i
              class="bi bi-backspace"></i> Вернуться к билетам</button>
          <button type="button" class="btn btn-outline-success" style="inline-size:200px"
            ng-click="changeTopic(topic_number)"><i class="bi bi-arrow-repeat"></i> Начать сначала</button>
        </div>
      </div>
    </div>
  </div>
  {% endverbatim %}
  {% else %}
  {% verbatim %}
  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">{{topic.name_en_us}} result</h5>
          <button type="button" ng-show="timeout" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="p-3 mb-2 bg-secondary text-white"
            ng-show="questions.length-togri_javob_soni-notogri_javob_soni!=0">Unmarked questions:
            {{questions.length-togri_javob_soni-notogri_javob_soni}}</div>
          <div class="p-3 mb-2 bg-success text-white"
            ng-show="togri_javob_soni!=0&&notogri_javob_soni!=questions.length">Correct answer: {{togri_javob_soni}}
          </div>
          <div class="p-3 mb-2 bg-danger text-white"
            ng-show="notogri_javob_soni!=0&&togri_javob_soni!=questions.length">Incorrect answer: {{notogri_javob_soni}}
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" ng-show="timeout" class="btn btn-outline-secondary" style="inline-size:200px"
            data-bs-dismiss="modal"><i class="bi bi-chevron-double-right"></i> Continue</button>
          <button type="button" class="btn btn-outline-primary" style="inline-size:200px"
            ng-show="topics.length>topic_number" ng-click="changeTopic(topic_number+1)"><i
              class="bi bi-box-arrow-right"></i> Go to the next ticket</button>
          <button type="button" class="btn btn-outline-danger" style="inline-size:200px" ng-click="back()"><i
              class="bi bi-backspace"></i> Back to tickets</button>
          <button type="button" class="btn btn-outline-success" style="inline-size:200px"
            ng-click="changeTopic(topic_number)"><i class="bi bi-arrow-repeat"></i> Start over</button>
        </div>
      </div>
    </div>
  </div>
  {% endverbatim %}
  {% endif %}
  {% endif %}

  <hr />
  {% if type == 'question' %}
  <div class="wrapper">
    <div class="container">
      <div class="C0mplexButton float-end" ng-click="showModal()">
        <a href="#">
          <span></span>
          <span></span>
          <span></span>
          <span></span>
          X
        </a>
      </div>
      <h1 style="color:green">
        {% comment %} <h1 id="list"> {{data}}</h1> {% endcomment %}
        <a href="https://play.google.com/store/apps/details?id=uzbavtotest.complexprogrammer.uz" target="_blank">
          {% if request.LANGUAGE_CODE == 'uz' %}
          {% verbatim %}
          {{topic.name_uz_uz}}
          {% endverbatim %}
          {% else %}
          {% if request.LANGUAGE_CODE == 'ru' %}
          {% verbatim %}
          {{topic.name_ru_ru}}
          {% endverbatim %}
          {% else %}
          {% verbatim %}
          {{topic.name_en_us}}
          {% endverbatim %}
          {% endif %}
          {% endif %}
        </a>
        <a href="https://play.google.com/store/apps/details?id=uzbavtotest.complexprogrammer.uz" target="_blank">
          <img src="/static/img/google-play.svg" />
        </a>
      </h1>
      <h1 id="timer" ng-click="f()">00:00</h1>
      <input type="hidden" id="t" value="0" />
      {% verbatim %}
      <nav aria-label="Page navigation example">
        <ul class="pagination">
          <li class="page-item" ng-show="question_number>1" ng-click="prev()">
            <a class="page-link" href="#" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
          <li ng-repeat="q in questions" ng-show="q==question" class="page-item active" id="question{{question_number}}"
            ng-click="b(question_number-x)"><a class="page-link" id="ab{{q.id}}" href="#">{{question_number-x}}</a></li>
          <!--<li class="page-item" id="question{{question_number+1}}" ng-click="b(question_number+1-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+1">{{question_number+1-x}}</a></li>
                <li class="page-item" id="question{{question_number+2}}" ng-click="b(question_number+2-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+2">{{question_number+2-x}}</a></li>
                <li class="page-item" id="question{{question_number+3}}" ng-click="b(question_number+3-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+3">{{question_number+3-x}}</a></li>
                <li class="page-item" id="question{{question_number+4}}" ng-click="b(question_number+4-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+4">{{question_number+4-x}}</a></li>
                <li class="page-item" id="question{{question_number+5}}" ng-click="b(question_number+5-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+5">{{question_number+5-x}}</a></li>
                <li class="page-item" id="question{{question_number+6}}" ng-click="b(question_number+6-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+6">{{question_number+6-x}}</a></li>
                <li class="page-item" id="question{{question_number+7}}" ng-click="b(question_number+7-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+7">{{question_number+7-x}}</a></li>
                <li class="page-item" id="question{{question_number+8}}" ng-click="b(question_number+8-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+8">{{question_number+8-x}}</a></li>
                <li class="page-item" id="question{{question_number+9}}" ng-click="b(question_number+9-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+9">{{question_number+9-x}}</a></li>
                <li class="page-item" id="question{{question_number+10}}" ng-click="b(question_number+10-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+10">{{question_number+10-x}}</a></li>
                -->
          <li class="page-item" ng-show="question_number<questions.length" ng-click="next()">
            <a class="page-link" href="#" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
        </ul>
      </nav>
      {% endverbatim %}
      {% comment %} <ul class="pagination pagination-lg">
        <li class="page-item" id="question1" ng-click="b(1)"><a class="page-link" id="ab1" href="#">1</a></li>
        <li class="page-item" id="question2" ng-click="b(2)"><a class="page-link" id="ab2" href="#">2</a></li>
        <li class="page-item" id="question3" ng-click="b(3)"><a class="page-link" id="ab3" href="#">3</a></li>
        <li class="page-item" id="question4" ng-click="b(4)"><a class="page-link" id="ab4" href="#">4</a></li>
        <li class="page-item" id="question5" ng-click="b(5)"><a class="page-link" id="ab5" href="#">5</a></li>
        <li class="page-item" id="question6" ng-click="b(6)"><a class="page-link" id="ab6" href="#">6</a></li>
        <li class="page-item" id="question7" ng-click="b(7)"><a class="page-link" id="ab7" href="#">7</a></li>
        <li class="page-item" id="question8" ng-click="b(8)"><a class="page-link" id="ab8" href="#">8</a></li>
        <li class="page-item" id="question9" ng-click="b(9)"><a class="page-link" id="ab9" href="#">9</a></li>
        <li class="page-item" id="question10" ng-click="b(10)"><a class="page-link" id="ab10" href="#">10</a></li>
      </ul> {% endcomment %}
      {% if request.LANGUAGE_CODE == 'uz' %}
      {% verbatim %}
      <div class="question-container">
        <h4 class="page-content">{{question.number}} - savol<br />{{question.name_uz_uz}}</h4>
        <img ng-if="question.image!=''" ng-show="question.image" src="/media/{{question.image}}" class="question-image"
          width="30%" ng-click="openImageModal('/media/' + question.image)" title="Rasmni kattalashtirish uchun bosing">
        <div class="list-group" style="text-align:start" ng-repeat="answer in answers">
          <a ng-click="ok(answer)" id="answer{{answer.id}}" href="#" class="list-group-item list-group-item-action"
            ng-show="answer.name_uz_uz!=''"
            ng-class="!question.selected_answer?'':answer.right?'list-group-item-success disabledDiv':'list-group-item-danger disabledDiv'"><input
              type="radio" ng-model='mValue' ng-checked='mValue === {{answer.id}}' name="answer{{question_number}}"
              value="answer{{answer.id}}"> {{answer.name_uz_uz}}</a>
        </div>
      </div>
      {% endverbatim %}
      {% else %}
      {% if request.LANGUAGE_CODE == 'ru' %}
      {% verbatim %}
      <div class="question-container">
        <h4 class="page-content">Вопрос {{question.number}}<br />{{question.name_ru_ru}}</h4>
        <img ng-if="question.image!=''" ng-show="question.image" src="/media/{{question.image}}" class="question-image"
          width="30%" ng-click="openImageModal('/media/' + question.image)"
          title="Нажмите, чтобы увеличить изображение">
        <div class="list-group" style="text-align:start" ng-repeat="answer in answers">
          <a ng-click="ok(answer)" id="answer{{answer.id}}" href="#" class="list-group-item list-group-item-action"
            ng-show="answer.name_ru_ru!=''"
            ng-class="!question.selected_answer?'':answer.right?'list-group-item-success disabledDiv':'list-group-item-danger disabledDiv'"><input
              type="radio" ng-model='mValue' ng-checked='mValue === {{answer.id}}' name="answer{{question_number}}"
              value="answer{{answer.id}}"> {{answer.name_ru_ru}}</a>
        </div>
      </div>
      {% endverbatim %}
      {% else %}
      {% verbatim %}
      <div class="question-container">
        <h4 class="page-content">Question {{question.number}}<br />{{question.name_en_us}}</h4>
        <img ng-if="question.image!=''" ng-show="question.image!=''" src="/media/{{question.image}}"
          class="question-image" width="30%" ng-click="openImageModal('/media/' + question.image)"
          title="Click to enlarge image">
        <div class="list-group" style="text-align:start" ng-repeat="answer in answers">
          <a ng-click="ok(answer)" id="answer{{answer.id}}" href="#" class="list-group-item list-group-item-action"
            ng-show="answer.name_en_us!=''"
            ng-class="!question.selected_answer?'':answer.right?'list-group-item-success disabledDiv':'list-group-item-danger disabledDiv'"><input
              type="radio" ng-model='mValue' ng-checked='mValue === {{answer.id}}' name="answer{{question_number}}"
              value="answer{{answer.id}}"> {{answer.name_en_us}}</a>
        </div>
      </div>
      {% endverbatim %}
      {% endif %}
      {% endif %}
    </div>
  </div>
  <script>
    if (window.screen.availWidth > 1366) {
      document.getElementsByClassName('pagination')[0].className = "pagination justify-content-center pagination-lg";
    }
    else {
      if (window.screen.availWidth > 768 && window.screen.availWidth < 1366) {
        document.getElementsByClassName('pagination')[0].className = "pagination justify-content-center";
      }
      else {
        document.getElementsByClassName('pagination')[0].className = "pagination justify-content-center";
      }
    }
  </script>
  {%else%}

  <section id="services">
    <div class="services container">
      <div class="service-top">
        <h2>
          <a href="https://play.google.com/store/apps/details?id=uzbavtotest.complexprogrammer.uz" target="_blank">
            {% if type == 'type' %}
            {% if request.LANGUAGE_CODE == 'uz' %}
            Testlar
            {% else %}
            {% if request.LANGUAGE_CODE == 'ru' %}
            Тесты
            {% else %}
            Tests
            {% endif %}
            {% endif %}
            {%else%}
            {% if request.LANGUAGE_CODE == 'uz' %}
            {% verbatim %}
            {{type_data.name_uz_uz}}
            {% endverbatim %}
            {% else %}
            {% if request.LANGUAGE_CODE == 'ru' %}
            {% verbatim %}
            {{type_data.name_ru_ru}}
            {% endverbatim %}
            {% else %}
            {% verbatim %}
            {{type_data.name_en_us}}
            {% endverbatim %}
            {% endif %}
            {% endif %}
            {%endif%}
          </a>
          <br />
          <br />
          <a href="https://play.google.com/store/apps/details?id=uzbavtotest.complexprogrammer.uz" target="_blank">
            <img src="/static/img/google-play.svg" />
          </a>
        </h2>
      </div>
      <div class="service-bottom">
        {%for item in data%}
        {% if item.image != '' %}
        <div class="service-item">
          <div class="icon">
            <img style="block-size: 100%;inline-size: 100%;object-fit: cover;" src="/media/{{item.image}}" />
          </div>
          {% else %}
          <div class="service-item">
            <div class="icon">
              <img style="block-size: 100%;inline-size: 100%;object-fit: cover;"
                src="/media/projects/images/avtotest.jpg" />
            </div>
            {% endif %}
            {% if request.LANGUAGE_CODE == 'uz' %}
            <h2>{{item.name_uz_uz}}</h2>
            {% else %}
            {% if request.LANGUAGE_CODE == 'ru' %}
            <h2>{{item.name_ru_ru}}</h2>
            {% else %}
            <h2>{{item.name_en_us}}</h2>
            {% endif %}
            {% endif %}
            <div class="C0mplexButton Success" style="margin-block-end: 0px;">
              {% if type == 'type' %}
              <a href="/tests?type_id={{ item.id }}">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <i class="material-icons">&#9758;</i>
                Enter
                <div class="spinner-border" role="status"></div>
              </a>
              {% endif %}
              {% if type == 'group' %}
              <a href="/tests?group_id={{ item.id }}">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <i class="material-icons">&#9758;</i>
                Enter
                <div class="spinner-border" role="status"></div>
              </a>
              {% endif %}
              {% if type == 'book' %}
              <a href="/tests?book_id={{ item.id }}">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <i class="material-icons">&#9758;</i>
                Enter
                <div class="spinner-border" role="status"></div>
              </a>
              {% endif %}
              {% if type == 'topic' %}
              <a href="/tests?topic_id={{ item.id }}">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <i class="material-icons">&#9758;</i>
                Enter
                <div class="spinner-border" role="status"></div>
              </a>
              {% endif %}
            </div>
          </div>
          {%endfor%}
        </div>
      </div>
  </section>
  {% endif %}
  <hr />
  {% include "comment_form.html" %}
  <script>
    var myModal = new bootstrap.Modal(document.getElementById('staticBackdrop'), {
      keyboard: false
    });
    function hexHtmlToString(str) {
      var REG_HEX = /&#x([a-fA-F0-9]+);/g;
      console.log(REG_HEX)
      return str.replace(REG_HEX, function (match, grp) {
        var num = parseInt(grp, 16);
        console.log(String.fromCharCode(num))
        return String.fromCharCode(num);
      });
    }
    var app = angular.module("App", []);
    app.controller("tests", ["$scope", "$http", "$filter", function ($scope, $http, $filter) {
      $scope._type = '{{ type|safe }}';
      $scope.type_data = JSON.parse('{{ type_data|safe }}');
      console.log($scope.type_data)
      if ($scope._type == "group") {
        $scope.type = JSON.parse('{{ type_data|safe }}');
      }
      if ($scope._type == "book") {
        $scope.group = JSON.parse('{{ type_data|safe }}');
      }
      if ($scope._type == "topic") {
        $scope.book = JSON.parse('{{ type_data|safe }}');
      }
      if ($scope._type == "question") {
        $scope.topic = JSON.parse('{{ type_data|safe }}');
        var timeH = document.getElementById("timer");
        $scope.x = 0
        $scope.isPaused = false;
        $scope.timeout = false;
        $scope.question_number = 1;
        LoadTopics($scope.topic.book_id);
        $scope.topic_number = $scope.topic.number;
        $scope.topic_id = $scope.topic.id;
        $scope.time = 3600;
        $scope.togri_javob_soni = 0;
        $scope.notogri_javob_soni = 0;
        $scope.questions = [];
        $scope.selected_answers = [];
        //setCookie("selected_answers", JSON.stringify($scope.selected_answers), 365);
        $scope.prev = function () {
          if ($scope.question_number > 1) {
            $scope.question_number = $scope.question_number - 1
          }
          myFunction($scope.question_number);
          set_color()
        }
        $scope.next = function () {
          if ($scope.question_number < $scope.questions.length) {
            $scope.question_number = $scope.question_number + 1
          }
          myFunction($scope.question_number);
          set_color()
        }
        $scope.openImageModal = function (imageSrc) {
          openImageModal(imageSrc);
        }
        function set_color() {
          $scope.questions.forEach((element) => {
            if (element.selected_answer) {
              if (element.selected_answer.right) {
                document.getElementById('ab' + element.id).classList.add('bg-success');
              }
              else {
                document.getElementById('ab' + element.id).classList.add('bg-danger');
              }
            }
          });
        }
        if ($scope.topic_id != 0) {
          checkJavoblar();
          LoadData();
        }
        $scope.mValue = null;
        $scope.back = function () {
          window.location.href = "/tests?book_id=" + $scope.topic.book_id;
        }
        $scope.changeTopic = function (value) {
          if (value <= $scope.topics.length) {
            $scope.topic = $scope.topics.find(word => word.number == value)
            if ($scope.topic.number == value) {
              setCookie("selected_answers", JSON.stringify($scope.selected_answers.filter(word => word.topic_id != $scope.topic.id)), 365);
            }
            window.location.href = "/tests?topic_id=" + $scope.topic.id;
          }
          else {

          }

        }
        $scope.showModal = function () {
          $scope.isPaused = true;
          $scope.timeout = true;
          myModal.show();

        }
        $('#timer').on('click', function (e) {
          e.preventDefault();
          //$scope.isPaused = !$scope.isPaused;
        });
        $("#staticBackdrop").on('hide.bs.modal', function () {
          $scope.isPaused = false;
        });
        function startTimer(timeSecond) {
          displayTime(timeSecond);
          const countDown = setInterval(() => {
            if (!$scope.isPaused) {
              timeSecond--;
              $scope.time = timeSecond;
              displayTime(timeSecond);
              if (timeSecond == 0 || timeSecond < 1) {
                endCount();
                clearInterval(countDown);
              }
            }
          }, 1000);
        }

        function displayTime(second) {
          const min = Math.floor(second / 60);
          const sec = Math.floor(second % 60);
          timeH.innerHTML = `${min < 10 ? "0" : ""}${min}:${sec < 10 ? "0" : ""}${sec}`;
        }

        function endCount() {
          timeH.innerHTML = "Vaqt tugadi";
          myModal.show();
        }
        function setCookie(cname, cvalue, exdays) {
          const d = new Date();
          d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
          let expires = "expires=" + d.toUTCString();
          document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }

        function getCookie(cname) {
          let name = cname + "=";
          let ca = document.cookie.split(';');
          for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) == ' ') {
              c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
              return c.substring(name.length, c.length);
            }
          }
          return "";
        }
        function checkJavoblar() {
          if (getCookie("selected_answers")) {
            $scope.selected_answers = JSON.parse(getCookie("selected_answers"));
          }
          $scope.selected_answers.filter(word => word.topic_id == $scope.topic_id).forEach((element) => {
            if (element.time < $scope.time) {
              $scope.time = element.time;
            }
          });
          startTimer($scope.time);

        }
        $scope.b = function (value) {
          $scope.x = 0
          if (value > $scope.question_number) {
            $scope.x = value - $scope.question_number
          }
          else {
            $scope.x = $scope.question_number - value
          }
          if (value > 1 && value < $scope.questions.length) {
            myFunction(value);
          }
        }
        function myFunction(value) {
          $scope.question_number = value;
          $scope.question = $scope.questions.find(element => element.number == $scope.question_number);
          LoadAnswers($scope.question.id)
          if ($scope.selected_answers.find(element => element.question_id == $scope.question.id)) {
            $scope.question.selected_answer = $scope.selected_answers.find(element => element.question_id == $scope.question.id);
          }
          $scope.mValue = $scope.question.selected_answer.id;
          document.getElementById('click').play();
          {% comment %} var element = document.getElementsByClassName('page-item');
          for (var i = 0; i < element.length; i++) {
            element[i].classList.remove('active');
          } {% endcomment %}
          //document.getElementById('question'+$scope.question_number).classList.add('active');
        }
        function setJavob(answer) {
          var obj = {
            topic_id: $scope.topic_id,
            question_id: $scope.question.id,
            id: answer.id,
            right: answer.right,
            time: $scope.time,
          };

          if (!$scope.selected_answers.find(element => element.question_id == obj.question_id)) {
            $scope.selected_answers.push(obj);
            setCookie("selected_answers", JSON.stringify($scope.selected_answers), 365);
          }

          $scope.mValue = answer.id;
          if (answer.right) {
            $scope.togri_javob_soni = $scope.togri_javob_soni + 1;
            document.getElementById('right').play();
            document.getElementById('answer' + answer.id).classList.add('list-group-item-success');
            document.getElementById('ab' + $scope.question.id).classList.add('bg-success');
            alertify.success("To`g`ri javob");
          }
          else {
            $scope.notogri_javob_soni = $scope.notogri_javob_soni + 1;
            document.getElementById('wrong').play();
            document.getElementById('answer' + answer.id).classList.add('list-group-item-danger');
            document.getElementById('ab' + $scope.question.id).classList.add('bg-danger');
            alertify.error("Noto`g`ri javob");
          }
          for (var i = 0; i < $scope.answers.length; i++) {
            if ($scope.answers[i].right) {
              document.getElementById('answer' + $scope.answers[i].id).classList.add('list-group-item-success');
            }
            document.getElementById('answer' + $scope.answers[i].id).classList.add('disabledDiv');
          }
          if ($scope.selected_answers.filter(word => word.topic_id == $scope.topic_id).length == $scope.questions.length) {
            $scope.isPaused = true;
            $scope.timeout = false;
            myModal.show();
          }
        }
        $scope.ok = function (answer) {
          setJavob(answer);
          //setTimeout(myFunction, 3000, $scope.question_number+1);
        }

        function LoadData() {
          document.getElementById('conn').style.visibility = "visible";
          $('#hh').modal({
            backdrop: 'static',
            keyboard: false
          })
          $http({
            method: 'GET',
            url: "/GetQuestions?topic_id=" + $scope.topic_id,
            dataType: "json"
          }).then(function (d) {
            let number = 0;
            d.data.forEach((item) => {
              selected_answer = '';
              if ($scope.selected_answers.find(element => element.question_id == item.id)) {
                selected_answer = $scope.selected_answers.find(element => element.question_id == item.id);
              }
              item.selected_answer = selected_answer
              $scope.questions.push(item);
            });
            $scope.questions = $scope.questions.sort(function (a, b) { return a.number - b.number });
            $scope.questions.forEach((element) => {
              if (element.number > number && number == element.number - 1 && element.selected_answer) {
                number = element.number;
              }
              if (element.selected_answer) {
                if (element.selected_answer.right) {
                  $scope.togri_javob_soni = $scope.togri_javob_soni + 1;
                }
                else {
                  $scope.notogri_javob_soni = $scope.notogri_javob_soni + 1;
                }
              }
            });
            if ($scope.selected_answers.filter(word => word.topic_id == $scope.topic_id).length == $scope.questions.length) {
              $("#hh").modal('hide');
              document.getElementById('conn').style.visibility = "hidden";
              $scope.isPaused = true;
              $scope.timeout = false;
              myModal.show();
            }
            $scope.question_number = number + 1;
            myFunction($scope.question_number)


            $("#hh").modal('hide');
            document.getElementById('conn').style.visibility = "hidden";
          }, function (error) {
            $("#hh").modal('hide');
            document.getElementById('conn').style.visibility = "hidden";
            console.log("error in GetQuestions -> ", error);
            alertify.error("Xatolik yuz berdi");
          });
        }
        function LoadTopics(book_id) {
          document.getElementById('conn').style.visibility = "visible";
          $('#hh').modal({
            backdrop: 'static',
            keyboard: false
          })
          $http({
            method: 'GET',
            url: "/GetTopics?book_id=" + book_id,
            dataType: "json"
          }).then(function (d) {
            $scope.topics = d.data
            $("#hh").modal('hide');
            document.getElementById('conn').style.visibility = "hidden";
          }, function (error) {
            $("#hh").modal('hide');
            document.getElementById('conn').style.visibility = "hidden";
            console.log("error in GetTopics -> ", error);
            alertify.error("Xatolik yuz berdi");
          });
        }
        function LoadQuestions(number) {

        }
        function LoadAnswers(question_id) {
          document.getElementById('conn').style.visibility = "visible";
          $('#hh').modal({
            backdrop: 'static',
            keyboard: false
          })
          $http({
            method: 'GET',
            url: "/GetAnswers?question_id=" + question_id,
            dataType: "json"
          }).then(function (d) {
            $scope.answers = d.data
            $("#hh").modal('hide');
            document.getElementById('conn').style.visibility = "hidden";
          }, function (error) {
            $("#hh").modal('hide');
            document.getElementById('conn').style.visibility = "hidden";
            console.log("error in GetAnswers -> ", error);
            alertify.error("Xatolik yuz berdi");
          });
        }
      }
    }]);
  </script>
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-format="autorelaxed"
    data-ad-client="ca-pub-7773722896374259" data-ad-slot="2479701367"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  <!-- <ins class="adsbygoogle"
     style="display:block; text-align:center;"
    data-ad-format="autorelaxed"
    data-ad-client="ca-pub-4137874891184814"
    data-ad-slot="4202531555"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script> -->
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-format="fluid"
    data-ad-layout-key="-an-4i-cp+a2+21k" data-ad-client="ca-pub-7773722896374259" data-ad-slot="4679993061"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  <!-- <ins class="adsbygoogle"
     style="display:block; text-align:center;"
    data-ad-format="fluid"
    data-ad-layout-key="-6t+ed+2i-1n-4w"
    data-ad-client="ca-pub-4137874891184814"
    data-ad-slot="7442938415"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script> -->
  <!-- Display 1 -->
  <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-client="ca-pub-7773722896374259"
    data-ad-slot="3869366477" data-ad-format="auto" data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  <!-- 1 chi abzast Mobil -->
  <!-- <ins class="adsbygoogle"     style="display:block; text-align:center;"
    data-ad-client="ca-pub-4137874891184814"
    data-ad-slot="2799587029"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script> -->

  <!-- Image Modal -->
  <div id="imageModal" class="image-modal">
    <span class="modal-close" onclick="closeImageModal()">&times;</span>
    <img id="modalImage" class="modal-content-image" src="" alt="Question Image">
  </div>

  <script>
    function openImageModal(imageSrc) {
      const modal = document.getElementById('imageModal');
      const modalImg = document.getElementById('modalImage');
      modal.classList.add('show');
      modalImg.src = imageSrc;
      document.body.style.overflow = 'hidden';
    }

    function closeImageModal() {
      const modal = document.getElementById('imageModal');
      modal.classList.remove('show');
      document.body.style.overflow = 'auto';
    }

    // Close modal when clicking outside the image
    document.getElementById('imageModal').addEventListener('click', function (e) {
      if (e.target === this) {
        closeImageModal();
      }
    });

    // Close modal with ESC key
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape') {
        closeImageModal();
      }
    });
  </script>

  <script>
    // Three.js Scene Setup for Test Page
    let scene, camera, renderer, particles, geometricShapes = [];
    let mouseX = 0, mouseY = 0;

    function initThreeJS() {
      const canvas = document.getElementById('threejs-canvas');
      if (!canvas) return;

      scene = new THREE.Scene();

      camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.z = 50;

      renderer = new THREE.WebGLRenderer({
        canvas,
        alpha: true,
        antialias: true
      });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(window.devicePixelRatio);

      // Create floating particles with educational theme colors
      createParticles();

      // Create geometric shapes representing knowledge and learning
      createEducationalShapes();

      // Add lights
      const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
      scene.add(ambientLight);

      const pointLight1 = new THREE.PointLight(0x6366f1, 1.5, 100);
      pointLight1.position.set(15, 15, 15);
      scene.add(pointLight1);

      const pointLight2 = new THREE.PointLight(0xec4899, 1.5, 100);
      pointLight2.position.set(-15, -15, 15);
      scene.add(pointLight2);

      const pointLight3 = new THREE.PointLight(0x06b6d4, 1.5, 100);
      pointLight3.position.set(0, 0, -20);
      scene.add(pointLight3);

      // Mouse movement listener
      document.addEventListener('mousemove', (event) => {
        mouseX = (event.clientX / window.innerWidth) * 2 - 1;
        mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
      });

      // Window resize handler
      window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });

      animate();
    }

    function createParticles() {
      const geometry = new THREE.BufferGeometry();
      const vertices = [];
      const colors = [];

      // Create fewer but larger particles for better visibility
      for (let i = 0; i < 2000; i++) {
        vertices.push(
          Math.random() * 200 - 100,
          Math.random() * 200 - 100,
          Math.random() * 200 - 100
        );

        // Educational theme colors: blue, purple, pink, cyan
        const colorOptions = [
          new THREE.Color(0x6366f1), // Indigo
          new THREE.Color(0x8b5cf6), // Purple
          new THREE.Color(0xec4899), // Pink
          new THREE.Color(0x06b6d4), // Cyan
          new THREE.Color(0xf59e0b)  // Amber
        ];
        const color = colorOptions[Math.floor(Math.random() * colorOptions.length)];
        colors.push(color.r, color.g, color.b);
      }

      geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
      geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));

      const material = new THREE.PointsMaterial({
        size: 0.8,
        vertexColors: true,
        transparent: true,
        opacity: 0.7,
        blending: THREE.AdditiveBlending
      });

      particles = new THREE.Points(geometry, material);
      scene.add(particles);
    }

    function createEducationalShapes() {
      // Create shapes representing different aspects of learning
      const shapes = [
        { geometry: new THREE.OctahedronGeometry(3.5), color: 0x6366f1, position: { x: 25, y: 15, z: -15 } },
        { geometry: new THREE.IcosahedronGeometry(3), color: 0xec4899, position: { x: -25, y: -15, z: -10 } },
        { geometry: new THREE.TorusGeometry(2.5, 0.6, 16, 100), color: 0x06b6d4, position: { x: 20, y: -20, z: -20 } },
        { geometry: new THREE.TetrahedronGeometry(3), color: 0x8b5cf6, position: { x: -20, y: 20, z: -25 } },
        { geometry: new THREE.DodecahedronGeometry(2.5), color: 0xf59e0b, position: { x: 0, y: 25, z: -15 } }
      ];

      shapes.forEach((shape) => {
        const material = new THREE.MeshPhongMaterial({
          color: shape.color,
          transparent: true,
          opacity: 0.25,
          wireframe: true,
          shininess: 100
        });

        const mesh = new THREE.Mesh(shape.geometry, material);
        mesh.position.set(shape.position.x, shape.position.y, shape.position.z);

        mesh.userData = {
          rotationSpeed: {
            x: Math.random() * 0.015 + 0.005,
            y: Math.random() * 0.015 + 0.005,
            z: Math.random() * 0.01
          }
        };

        geometricShapes.push(mesh);
        scene.add(mesh);
      });
    }

    function animate() {
      requestAnimationFrame(animate);

      // Rotate particles slowly
      if (particles) {
        particles.rotation.y += 0.0008;
        particles.rotation.x += 0.0004;
      }

      // Animate geometric shapes
      geometricShapes.forEach((shape) => {
        shape.rotation.x += shape.userData.rotationSpeed.x;
        shape.rotation.y += shape.userData.rotationSpeed.y;
        shape.rotation.z += shape.userData.rotationSpeed.z;
      });

      // Gentle camera movement based on mouse
      camera.position.x += (mouseX * 3 - camera.position.x) * 0.03;
      camera.position.y += (mouseY * 3 - camera.position.y) * 0.03;
      camera.lookAt(scene.position);

      renderer.render(scene, camera);
    }

    // Initialize Three.js when DOM is loaded
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initThreeJS);
    } else {
      initThreeJS();
    }

    // Update Three.js theme based on dark/light mode
    function updateThreeJSTheme(theme) {
      if (!particles || !geometricShapes.length) return;

      if (theme === 'dark') {
        particles.material.opacity = 0.6;
        geometricShapes.forEach(shape => {
          shape.material.opacity = 0.35;
        });
      } else {
        particles.material.opacity = 0.7;
        geometricShapes.forEach(shape => {
          shape.material.opacity = 0.25;
        });
      }
    }

    // Hook into existing theme toggle
    const originalToggleTheme = window.toggleTheme;
    if (originalToggleTheme) {
      window.toggleTheme = function () {
        originalToggleTheme();
        setTimeout(() => {
          const currentTheme = document.documentElement.getAttribute('data-theme');
          updateThreeJSTheme(currentTheme);
        }, 100);
      };
    }
  </script>
  {% include "includes/scroll_buttons.html" %}
</body>

</html>