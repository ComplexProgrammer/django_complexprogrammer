{% load i18n %}
{% load static %}
{% comment %} {% load jsonify %} {% endcomment %}
{% get_current_language as LANGUAGE_CODE %}
{% get_available_languages as LANGUAGES %}
{% get_language_info_list for LANGUAGES as languages %}
<div class="fixed-top">
  <div class="position-relative" style="margin-block-start:50px;">
    <div class="position-absolute top-0 end-0 translate-middle">
      <div class="container">
        <div class="row">
          <div class="col">
            <form action="{% url 'set_language' %}" method="POST">
              {% csrf_token %}
              {% comment %} <input name="next" type="hidden" value="{{ redirect_to }}"> {% endcomment %}
              <select class="form-select form-select-lg mb-3" aria-label=".form-select-lg example" name="language" onchange="this.form.submit()">
                {% for language in languages %}
                <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                  {{ language.name_local }}
                  {% if LANGUAGE_CODE == 'en' %}
                  <img src="https://ipapi.co/static/images/flags/us.png" />
                  {% else %}
                  <img src="https://ipapi.co/static/images/flags/{{LANGUAGE_CODE}}.png" />
                  {% endif %}
                </option>
                {% endfor %}
              </select>
            </form>
          </div>
          <div class="col-1">
            {% if LANGUAGE_CODE == 'en' %}
            <img style="object-fit: cover;" src="https://ipapi.co/static/images/flags/us.png" />
            {% else %}
            <img style="object-fit: cover;" src="https://ipapi.co/static/images/flags/{{LANGUAGE_CODE}}.png" />
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="fixed-top">
  <div class="position-relative">
      <div class="position-absolute end-0">
          <div class="C0mplexButton float-end">
            {% if type == 'type' %}
              <a href="/">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                X
              </a>
            {% endif %}
            {% if type == 'group' %}
              <a href="/tests">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                X
              </a>
            {% endif %}
            {% if type == 'book' %}
              {% verbatim %}
                <a href="/tests?type_id={{type_data.type_id}}">
                  <span></span>
                  <span></span>
                  <span></span>
                  <span></span>
                  X
                </a>
              {% endverbatim %}
            {% endif %}
            {% if type == 'topic' %}
              {% verbatim %}
                <a href="/tests?group_id={{type_data.group_id}}">
                  <span></span>
                  <span></span>
                  <span></span>
                  <span></span>
                  X
                </a>
              {% endverbatim %}
            {% endif %}
          </div>
      </div>
  </div>
</div>
<!DOCTYPE html>
<html lang="en">
<head>
<script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "e815a36ng3");
</script>
<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(90624869, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/90624869" style="position:absolute; inset-inline-start:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
    <!-- Yandex.RTB -->
<script>window.yaContextCb=window.yaContextCb||[]</script>
<script src="https://yandex.ru/ads/system/context.js" async></script>
<meta name="yandex-verification" content="6bd5e2cc7d84e7b1" />
<meta charset="UTF-8">
<title>
  {% if request.LANGUAGE_CODE == 'uz' %}
    Testlar {{type}}>
  {% else %}
  {% if request.LANGUAGE_CODE == 'ru' %}
    Тесты {{type}}
  {% else %}
    Tests {{type}} 
  {% endif %}
  {% endif %}
  {% if request.LANGUAGE_CODE == 'uz' %}
  {% verbatim %}
  {{type_data.name_uz_uz}}
  {% endverbatim %}
  {% else %}
  {% if request.LANGUAGE_CODE == 'ru' %}
  {% verbatim %}
  {{type_data.name_ru_ru}}
  {% endverbatim %}
  {% else %}
  {% verbatim %}
  {{type_data.id}}
  {{type_data.name_en_us}}
  {% endverbatim %}
  {% endif %}
  {% endif %}
</title>
{% if request.LANGUAGE_CODE == 'uz' %}
<meta name="description" content="Testlar {{type}}"/>
{% else %}
{% if request.LANGUAGE_CODE == 'ru' %}
<meta name="description" content="Тесты {{type}}"/>
{% else %}
<meta name="description" content="Tests {{type}}"/>
{% endif %}
{% endif %}
{% if request.LANGUAGE_CODE == 'uz' %}
{% verbatim %}
<meta name="description" content="{{type_data.name_uz_uz}}"/>
{% endverbatim %}
{% else %}
{% if request.LANGUAGE_CODE == 'ru' %}
{% verbatim %}
<meta name="description" content="{{type_data.name_ru_ru}}"/>
{% endverbatim %}
{% else %}
{% verbatim %}
<meta name="description" content="{{type_data.name_en_us}}"/>
{% endverbatim %}
{% endif %}
{% endif %}
<meta property="og:image" content="/media/projects/images/test.png"/>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4137874891184814" crossorigin="anonymous"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7773722896374259"
     crossorigin="anonymous"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8DHWL20H58"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8DHWL20H58');
</script>
        <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NW763C2');</script>
<!-- End Google Tag Manager -->
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-analytics.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyDpWaFi5QLTNc-yY0ieMKJtGOmbm2ofBm4",
        authDomain: "c0mplex.firebaseapp.com",
        projectId: "c0mplex",
        storageBucket: "c0mplex.appspot.com",
        messagingSenderId: "755681568857",
        appId: "1:755681568857:web:102b1b733df55baefe2948",
        measurementId: "G-H8XGTS4B9J"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
    </script>
    <link rel="icon" sizes="16x16" href="/static/img/avtotest.png">
    <link rel="stylesheet" href="/static/css/C0mplexButtonStyle.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css"/>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/semantic.min.css"/>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.min.css"/>
    <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twbs-pagination/1.4.2/jquery.twbsPagination.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js" integrity="sha512-KZmyTq3PLx9EZl0RHShHQuXtrvdJ+m35tuOiwlcZfs/rE7NZv29ygNA8SFCkMXTnYZQK2OX0Gm2qKGfvWEtRXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --bg-color: #fafbfc;
            --text-color: #1a1a1a;
            --card-bg: rgba(255, 255, 255, 0.8);
            --border-color: rgba(255, 255, 255, 0.2);
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
            --success-color: #22c55e;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="dark"] {
            --bg-color: #0f0f23;
            --text-color: #ffffff;
            --card-bg: rgba(30, 30, 46, 0.8);
            --border-color: rgba(255, 255, 255, 0.1);
            --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --glass-bg: rgba(30, 30, 46, 0.4);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }

        .wrapper{
            margin: 60px auto;
            text-align: center;
            max-width: 800px;
            padding: 0 20px;
        }

        .page-content{
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: var(--card-shadow);
            display: inline-block;
            padding: 2rem;
            width: 100%;
            max-width: 660px;
            margin: 20px 0;
            transition: all 0.3s ease;
        }

        .page-content:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .alertify-log-custom {
            background: var(--warning-color);
            border-radius: 12px;
            box-shadow: var(--card-shadow);
        }

        .poin:hover {
            cursor: pointer;
            transform: scale(1.05);
            transition: transform 0.2s ease;
        }

        .disabledDiv {
            pointer-events: none;
            opacity: 0.4;
            filter: grayscale(50%);
        }

        .container {
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        .page {
            display: none;
        }

        .page-active {
            display: block;
            animation: fadeInUp 0.6s ease-out;
        }

        section {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 2rem 0;
        }

        h1 {
            font-family: 'Inter', sans-serif;
            font-size: clamp(2rem, 5vw, 4rem);
            font-weight: 800;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Timer styles */
        #timer {
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            padding: 1rem 2rem;
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-color);
            box-shadow: var(--card-shadow);
            margin: 1rem 0;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        #timer:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        /* Question styles */
        .question-container {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: var(--card-shadow);
            padding: 2rem;
            margin: 2rem 0;
            transition: all 0.3s ease;
        }

        .question-container:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .question-image {
            max-width: 100%;
            height: auto;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            margin: 1rem 0;
        }

        /* Answer options */
        .list-group-item {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            margin: 0.5rem 0;
            padding: 1rem 1.5rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .list-group-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--primary-gradient);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }

        .list-group-item:hover:not(.disabledDiv) {
            transform: translateX(8px) scale(1.02);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .list-group-item:hover:not(.disabledDiv)::before {
            opacity: 0.1;
        }

        .list-group-item > * {
            position: relative;
            z-index: 2;
        }

        /* Success/Error states */
        .list-group-item-success {
            background: var(--success-color) !important;
            color: white !important;
            border-color: var(--success-color) !important;
            transform: scale(1.02);
        }

        .list-group-item-danger {
            background: var(--danger-color) !important;
            color: white !important;
            border-color: var(--danger-color) !important;
            transform: scale(1.02);
        }

        /* Pagination */
        .pagination {
            justify-content: center;
            margin: 2rem 0;
        }

        .page-link {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-color);
            border-radius: 12px;
            margin: 0 2px;
            transition: all 0.3s ease;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .page-link:hover {
            background: var(--primary-gradient);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .page-item.active .page-link {
            background: var(--primary-gradient);
            border-color: transparent;
            color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInFromLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInFromRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .wrapper {
                margin: 20px auto;
                padding: 0 10px;
            }
            
            .page-content {
                padding: 1.5rem;
                margin: 10px 0;
            }
            
            .question-container {
                padding: 1.5rem;
                margin: 1rem 0;
            }
            
            #timer {
                font-size: 1.5rem;
                padding: 0.8rem 1.5rem;
            }

            /* Theme toggle mobile */
            .theme-toggle {
                width: 50px;
                height: 50px;
                top: 15px;
                right: 15px;
            }

            .theme-toggle i {
                font-size: 1.2rem;
            }

            .theme-toggle-text {
                font-size: 0.6rem;
                bottom: -20px;
            }
        }

        @media (max-width: 480px) {
            .theme-toggle {
                width: 45px;
                height: 45px;
                top: 10px;
                right: 10px;
            }

            .theme-toggle i {
                font-size: 1rem;
            }

            .theme-toggle-text {
                font-size: 0.5rem;
                bottom: -18px;
            }
        }
    </style>
    <style>
      /* Hero Section for Tests */
      .tests-hero {
        background: var(--primary-gradient);
        padding: 80px 0 60px;
        margin-bottom: 50px;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .tests-hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: 
            radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 70% 80%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
        z-index: 0;
      }

      .tests-hero-content {
        position: relative;
        z-index: 1;
        max-width: 800px;
        margin: 0 auto;
        padding: 0 20px;
      }

      .tests-hero-title {
        font-size: clamp(2.5rem, 6vw, 4rem);
        font-weight: 800;
        margin-bottom: 20px;
        background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .tests-hero-subtitle {
        font-size: clamp(1.1rem, 3vw, 1.3rem);
        color: rgba(255, 255, 255, 0.9);
        font-weight: 400;
        margin-bottom: 30px;
        line-height: 1.6;
      }

      #services .services {
        flex-direction: column;
        text-align: center;
        max-width: 1500px;
        margin: 0 auto;
        padding: 100px 0;
      }
      
      #services .service-top {
        max-width: 500px;
        margin: 0 auto;
      }
      
      #services .service-bottom {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 50px;
        gap: 2rem;
      }
      
      #services .service-item {
        flex-basis: calc(25% - 2rem);
        min-width: 280px;
        display: flex;
        align-items: flex-start;
        justify-content: center;
        flex-direction: column;
        padding: 2rem;
        border-radius: 24px;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        box-shadow: var(--card-shadow);
        margin: 0;
        position: relative;
        z-index: 1;
        overflow: hidden;
        height: 350px;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
      }

      /* Dark mode for service-item */
      [data-theme="dark"] #services .service-item {
        background: rgba(30, 30, 46, 0.4);
        border-color: rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }

      [data-theme="dark"] #services .service-item:hover {
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
        border-color: rgba(255, 255, 255, 0.2);
      }

      #services .service-item::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--primary-gradient);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: 1;
        border-radius: 24px;
      }

      #services .service-item:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        border-color: rgba(255, 255, 255, 0.3);
      }

      #services .service-item:hover::before {
        opacity: 0.1;
      }

      #services .service-item .icon {
        width: 120px;
        height: 120px;
        margin-bottom: 20px;
        border-radius: 16px;
        overflow: hidden;
        position: relative;
        z-index: 2;
        transition: transform 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      #services .service-item:hover .icon {
        transform: scale(1.1);
      }

      #services .service-item .icon img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 16px;
        transition: all 0.3s ease;
      }

      /* Dark mode for icons */
      [data-theme="dark"] #services .service-item .icon {
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      }

      [data-theme="dark"] #services .service-item:hover .icon {
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
      }

      #services .service-item h2 {
        font-size: 1.5rem;
        color: var(--text-color);
        margin-bottom: 10px;
        text-transform: uppercase;
        font-weight: 700;
        position: relative;
        z-index: 2;
        transition: all 0.3s ease;
      }

      #services .service-item:hover h2 {
        color: #ffffff;
        text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        transform: translateY(-2px);
      }

      #services .service-item p {
        color: var(--text-color);
        text-align: start;
        opacity: 0.7;
        position: relative;
        z-index: 2;
        transition: all 0.3s ease;
      }

      #services .service-item:hover p {
        color: rgba(255, 255, 255, 0.9);
        opacity: 1;
      }

      /* Dark mode text colors */
      [data-theme="dark"] #services .service-item h2 {
        color: #ffffff;
      }

      [data-theme="dark"] #services .service-item p {
        color: rgba(255, 255, 255, 0.8);
      }

      [data-theme="dark"] #services .service-item:hover h2 {
        color: #ffffff;
        text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
      }

      [data-theme="dark"] #services .service-item:hover p {
        color: rgba(255, 255, 255, 0.95);
        opacity: 1;
      }

      #services .service-item .C0mplexButton {
        position: relative;
        z-index: 2;
        margin-top: auto;
      }

      /* Responsive adjustments */
      @media (max-width: 1200px) {
        #services .service-item {
          flex-basis: calc(33.333% - 2rem);
        }
      }

      @media (max-width: 768px) {
        #services .service-item {
          flex-basis: calc(50% - 1rem);
          min-width: 250px;
          height: 300px;
          padding: 1.5rem;
        }
        
        #services .service-item .icon {
          width: 80px;
          height: 80px;
        }
        
        #services .service-item h2 {
          font-size: 1.2rem;
        }

        /* Dark mode mobile adjustments */
        [data-theme="dark"] #services .service-item {
          background: rgba(30, 30, 46, 0.5);
          border-color: rgba(255, 255, 255, 0.15);
        }
      }

      @media (max-width: 480px) {
        #services .service-item {
          flex-basis: 100%;
          min-width: 100%;
          height: 280px;
          padding: 1rem;
        }

        /* Dark mode mobile small adjustments */
        [data-theme="dark"] #services .service-item {
          background: rgba(30, 30, 46, 0.6);
          border-color: rgba(255, 255, 255, 0.2);
        }
      }
    </style>

<style>
            :root {
            --bg-color: #ffffff;
            --text-color: #212121;
            --card-bg: #ffffff;
            --border-color: #e0e0e0;
            transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --bg-color: #212121;
            --text-color: #ffffff;
            --card-bg: #2d2d2d;
            --border-color: #444;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .card {
            background-color: var(--card-bg);
            border-color: var(--border-color);
        }

        /* Add table styles for dark mode */
        [data-theme="dark"] .table {
            color: var(--text-color);
        }

        [data-theme="dark"] .table-hover tbody tr:hover {
            background-color: rgba(255, 255, 255, 0.075);
            color: var(--text-color);
        }

        [data-theme="dark"] .table thead th {
            color: var(--text-color);
            border-bottom-color: var(--border-color);
        }

        [data-theme="dark"] .table td {
            border-color: var(--border-color);
        }

        .theme-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid var(--border-color);
            background: var(--card-bg);
            color: var(--text-color);
            cursor: pointer;
            z-index: 1000;
        }
    </style>
    <script>
        // Initialize theme on page load
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeButton(savedTheme);
        });

        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Tugmani yangilash
            updateThemeButton(newTheme);
            
            // Tugma animatsiyasi
            const button = document.getElementById('themeButton');
            button.style.transform = 'scale(0.95)';
            setTimeout(() => {
                button.style.transform = '';
            }, 150);
        }

        function updateThemeButton(theme) {
            const button = document.getElementById('themeButton');
            const icon = theme === 'light' ? 'fa-moon' : 'fa-sun';
            const text = theme === 'light' ? 'Tun' : 'Kun';
            const title = theme === 'light' ? 'Tun rejimiga o\'tish' : 'Kun rejimiga o\'tish';
            
            button.innerHTML = `<i class="fas ${icon}"></i><span class="theme-toggle-text">${text}</span>`;
            button.title = title;
        }
    </script>
<!-- Theme toggle tugmasini yangilash -->
<button id="themeButton" class="theme-toggle" onclick="toggleTheme()" title="Kun/Tun rejimini o'zgartirish">
    <i class="fas fa-moon"></i>
    <span class="theme-toggle-text">Tun</span>
</button>
<!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Color variables */
            --primary-color: #0072e5;
            --secondary-color: #475569;
            --success-color: #22c55e;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #3399ff;
            
            /* Light theme */
            --bg-color: #ffffff;
            --text-color: #1e293b;
            --card-bg: #ffffff;
            --border-color: #e2e8f0;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --question-bg: #ffffff;
            --option-bg: #f8fafc;
            --option-hover: #f1f5f9;
            --option-border: #e2e8f0;
            --option-text: #1e293b;
        }

        [data-theme="dark"] {
            --bg-color: #0a1929;
            --text-color: #e7ebf0;
            --card-bg: #132f4c;
            --border-color: #1e4976;
            --shadow-color: rgba(0, 0, 0, 0.4);
            --question-bg: #132f4c;
            --option-bg: #173a5e;
            --option-hover: #1e4976;
            --option-border: #265d97;
            --option-text: #e7ebf0;
            --primary-color: #3399ff;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .card {
            background-color: var(--card-bg);
            border-color: var(--border-color);
            box-shadow: 0 4px 6px var(--shadow-color);
        }

        .page-content {
            background-color: var(--card-bg) !important;
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        /* List group styles */
        .list-group-item {
            background-color: var(--option-bg);
            color: var(--option-text);
            border-color: var(--option-border);
            transition: all 0.2s ease;
        }

        .list-group-item:hover:not(.disabledDiv) {
            background-color: var(--option-hover);
            border-color: var(--option-border);
            transform: translateX(8px);
        }

        /* CSS logical properties */
        .table thead th {
            border-block-end-color: var(--border-color);
        }
        
        [dir="ltr"] .list-group-item:hover:not(.disabledDiv) {
            transform: translateX(var(--spacing-sm));
        }
        
        [dir="rtl"] .list-group-item:hover:not(.disabledDiv) {
            transform: translateX(calc(var(--spacing-sm) * -1));
        }

        /* Theme toggle button */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            padding: 0;
            border: 2px solid var(--glass-border);
            border-radius: 50%;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            color: var(--text-color);
            cursor: pointer;
            box-shadow: var(--card-shadow);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .theme-toggle:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            background: var(--primary-gradient);
            color: white;
            border-color: rgba(255, 255, 255, 0.3);
        }

        .theme-toggle:active {
            transform: translateY(-1px) scale(1.02);
        }

        .theme-toggle i {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .theme-toggle:hover i {
            transform: rotate(180deg);
        }

        /* Theme toggle text */
        .theme-toggle-text {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            font-weight: 500;
            color: var(--text-color);
            opacity: 0.7;
            white-space: nowrap;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover .theme-toggle-text {
            opacity: 1;
            color: white;
        }

        /* Table styles */
        .table {
            color: var(--text-color);
        }

        .table-hover tbody tr:hover {
            background-color: var(--option-hover);
            color: var(--text-color);
        }

        .table thead th {
            color: var(--text-color);
            border-bottom-color: var(--border-color);
        }

        .table td {
            border-color: var(--border-color);
        }

        /* Success/Error states */
        .list-group-item.list-group-item-success {
            background-color: var(--success-color);
            color: white;
            border-color: transparent;
        }

        .list-group-item.list-group-item-danger {
            background-color: var(--danger-color);
            color: white;
            border-color: transparent;
        }

        /* Modal styles */
        .modal-content {
            background-color: var(--card-bg);
            border-color: var(--border-color);
        }

        .modal-header {
            border-color: var(--border-color);
            color: var(--text-color);
        }

        .modal-body {
            color: var(--text-color);
        }
    </style>
</head>
<body ng-app="App" ng-controller="tests">
  <ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-7773722896374259"
     data-ad-slot="2303661293"></ins>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
  <ins class="adsbygoogle"
  style="display:block; text-align:center;"
  data-ad-layout="in-article"
  data-ad-format="fluid"
  data-ad-client="ca-pub-4137874891184814"
  data-ad-slot="6832564320"></ins>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
<!-- Yandex.RTB R-A-1963742-5 -->
<script>window.yaContextCb.push(()=>{
  Ya.Context.AdvManager.render({
    type: 'fullscreen',
    blockId: 'R-A-1963742-5'
  })
})</script>
    <!-- Yandex.RTB R-A-1963742-1 -->
    <div id="yandex_rtb_R-A-1963742-1"></div>
    <script>window.yaContextCb.push(()=>{
      Ya.Context.AdvManager.render({
        renderTo: 'yandex_rtb_R-A-1963742-1',
        blockId: 'R-A-1963742-1'
      })
    })</script>
    <div id="conn" style="visibility:hidden;position:absolute;margin-inline-start:45%;margin-block-start:20%;z-index:9999">
        <img src="/static/img/buffering.gif" />
    </div>
    <input id="hh" type="hidden" />
    <audio id="click" controls="controls" style="position:absolute;visibility:hidden">
        <source src="/static/sounds/click.mp3" type="audio/mpeg" />
    </audio>
    <audio id="right" controls="controls" style="position:absolute;visibility:hidden">
        <source src="/static/sounds/right.mp3" type="audio/mpeg" />
    </audio>
    <audio id="wrong" controls="controls" style="position:absolute;visibility:hidden">
        <source src="/static/sounds/wrong.mp3" type="audio/mpeg" />
    </audio>
{% if request.LANGUAGE_CODE == 'uz' %}
{% verbatim %}
<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">{{topic.name_uz_uz}} natijasi</h5>
        <button type="button" ng-show="timeout" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="p-3 mb-2 bg-secondary text-white" ng-show="questions.length-togri_javob_soni-notogri_javob_soni!=0">Belgilanmagan savollar : {{questions.length-togri_javob_soni-notogri_javob_soni}} ta</div>
        <div class="p-3 mb-2 bg-success text-white" ng-show="togri_javob_soni!=0&&notogri_javob_soni!=questions.length">To'g'ri javob : {{togri_javob_soni}} ta</div>
        <div class="p-3 mb-2 bg-danger text-white" ng-show="notogri_javob_soni!=0&&togri_javob_soni!=questions.length">Noto'g'ri javob : {{notogri_javob_soni}} ta</div>
      </div>
      <div class="modal-footer">
        <button type="button" ng-show="timeout" class="btn btn-outline-secondary" style="inline-size:200px" data-bs-dismiss="modal"><i class="bi bi-chevron-double-right"></i> Davom etish</button>
        <button type="button" class="btn btn-outline-primary" style="inline-size:200px" ng-show="topics.length>topic_number" ng-click="changeTopic(topic_number+1)"><i class="bi bi-box-arrow-right"></i> Keyingi biletga o'tish</button>
        <button type="button" class="btn btn-outline-danger" style="inline-size:200px" ng-click="back()"><i class="bi bi-backspace"></i> Biletlarga qaytish</button>
        <button type="button" class="btn btn-outline-success" style="inline-size:200px" ng-click="changeTopic(topic_number)"><i class="bi bi-arrow-repeat"></i> Boshidan boshlash</button>
      </div>
    </div>
  </div>
</div>
{% endverbatim %}
{% else %}
{% if request.LANGUAGE_CODE == 'ru' %}
{% verbatim %}
<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Результат {{topic.name_ru_ru}}</h5>
        <button type="button" ng-show="timeout" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="p-3 mb-2 bg-secondary text-white" ng-show="questions.length-togri_javob_soni-notogri_javob_soni!=0">Неотмеченные вопросы: {{questions.length-togri_javob_soni-notogri_javob_soni}}</div>
        <div class="p-3 mb-2 bg-success text-white" ng-show="togri_javob_soni!=0&&notogri_javob_soni!=questions.length">Правильный ответ: {{togri_javob_soni}}</div>
        <div class="p-3 mb-2 bg-danger text-white" ng-show="notogri_javob_soni!=0&&togri_javob_soni!=questions.length">Неправильный ответ: {{notogri_javob_soni}}</div>
      </div>
      <div class="modal-footer">
        <button type="button" ng-show="timeout" class="btn btn-outline-secondary" style="inline-size:200px" data-bs-dismiss="modal"><i class="bi bi-chevron-double-right"></i> Продолжать</button>
        <button type="button" class="btn btn-outline-primary" style="inline-size:200px" ng-show="topics.length>topic_number" ng-click="changeTopic(topic_number+1)"><i class="bi bi-box-arrow-right"></i> Перейти к следующему билету</button>
        <button type="button" class="btn btn-outline-danger" style="inline-size:200px" ng-click="back()"><i class="bi bi-backspace"></i> Вернуться к билетам</button>
        <button type="button" class="btn btn-outline-success" style="inline-size:200px" ng-click="changeTopic(topic_number)"><i class="bi bi-arrow-repeat"></i> Начать сначала</button>
      </div>
    </div>
  </div>
</div>
{% endverbatim %}
{% else %}
{% verbatim %}
<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">{{topic.name_en_us}} result</h5>
        <button type="button" ng-show="timeout" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="p-3 mb-2 bg-secondary text-white" ng-show="questions.length-togri_javob_soni-notogri_javob_soni!=0">Unmarked questions: {{questions.length-togri_javob_soni-notogri_javob_soni}}</div>
        <div class="p-3 mb-2 bg-success text-white" ng-show="togri_javob_soni!=0&&notogri_javob_soni!=questions.length">Correct answer: {{togri_javob_soni}}</div>
        <div class="p-3 mb-2 bg-danger text-white" ng-show="notogri_javob_soni!=0&&togri_javob_soni!=questions.length">Incorrect answer: {{notogri_javob_soni}}</div>
      </div>
      <div class="modal-footer">
        <button type="button" ng-show="timeout" class="btn btn-outline-secondary" style="inline-size:200px" data-bs-dismiss="modal"><i class="bi bi-chevron-double-right"></i> Continue</button>
        <button type="button" class="btn btn-outline-primary" style="inline-size:200px" ng-show="topics.length>topic_number" ng-click="changeTopic(topic_number+1)"><i class="bi bi-box-arrow-right"></i> Go to the next ticket</button>
        <button type="button" class="btn btn-outline-danger" style="inline-size:200px" ng-click="back()"><i class="bi bi-backspace"></i> Back to tickets</button>
        <button type="button" class="btn btn-outline-success" style="inline-size:200px" ng-click="changeTopic(topic_number)"><i class="bi bi-arrow-repeat"></i> Start over</button>
      </div>
    </div>
  </div>
</div>
{% endverbatim %}
{% endif %}
{% endif %}

    <hr />
    {% if type == 'question' %}
    <div class="wrapper">
          <div class="container">
            <div class="C0mplexButton float-end" ng-click="showModal()">
                <a href="#">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    X
                </a>
            </div>
            <h1 style="color:green">
              {% comment %} <h1 id = "list"> {{data}}</h1> {% endcomment %}
                <a href="https://play.google.com/store/apps/details?id=uzbavtotest.complexprogrammer.uz" target="_blank">
                  {% if request.LANGUAGE_CODE == 'uz' %}
                  {% verbatim %}
                  {{topic.name_uz_uz}}
                  {% endverbatim %}
                  {% else %}
                  {% if request.LANGUAGE_CODE == 'ru' %}
                  {% verbatim %}
                  {{topic.name_ru_ru}}
                  {% endverbatim %}
                  {% else %}
                  {% verbatim %}
                  {{topic.name_en_us}}
                  {% endverbatim %}
                  {% endif %}
                  {% endif %}
                </a>
                <a href="https://play.google.com/store/apps/details?id=uzbavtotest.complexprogrammer.uz" target="_blank">
                    <img src="/static/img/google-play.svg" />
                </a>
            </h1>
            <h1 id="timer" ng-click="f()">00:00</h1>
            <input type="hidden" id="t" value="0" />
            {% verbatim %}
            <nav aria-label="Page navigation example">
              <ul class="pagination">
                <li class="page-item" ng-show="question_number>1" ng-click="prev()">
                  <a class="page-link" href="#" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                  </a>
                </li>
                <li ng-repeat="q in questions" ng-show="q==question" class="page-item active" id="question{{question_number}}" ng-click="b(question_number-x)"><a class="page-link" id="ab{{q.id}}" href="#">{{question_number-x}}</a></li>
                <!--<li class="page-item" id="question{{question_number+1}}" ng-click="b(question_number+1-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+1">{{question_number+1-x}}</a></li>
                <li class="page-item" id="question{{question_number+2}}" ng-click="b(question_number+2-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+2">{{question_number+2-x}}</a></li>
                <li class="page-item" id="question{{question_number+3}}" ng-click="b(question_number+3-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+3">{{question_number+3-x}}</a></li>
                <li class="page-item" id="question{{question_number+4}}" ng-click="b(question_number+4-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+4">{{question_number+4-x}}</a></li>
                <li class="page-item" id="question{{question_number+5}}" ng-click="b(question_number+5-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+5">{{question_number+5-x}}</a></li>
                <li class="page-item" id="question{{question_number+6}}" ng-click="b(question_number+6-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+6">{{question_number+6-x}}</a></li>
                <li class="page-item" id="question{{question_number+7}}" ng-click="b(question_number+7-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+7">{{question_number+7-x}}</a></li>
                <li class="page-item" id="question{{question_number+8}}" ng-click="b(question_number+8-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+8">{{question_number+8-x}}</a></li>
                <li class="page-item" id="question{{question_number+9}}" ng-click="b(question_number+9-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+9">{{question_number+9-x}}</a></li>
                <li class="page-item" id="question{{question_number+10}}" ng-click="b(question_number+10-x)"><a class="page-link" href="#" ng-show="questions.length>=question_number+10">{{question_number+10-x}}</a></li>
                -->
                <li class="page-item" ng-show="question_number<questions.length" ng-click="next()">
                  <a class="page-link" href="#" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                  </a>
                </li>
              </ul>
            </nav>
            {% endverbatim %}
            {% comment %} <ul class="pagination pagination-lg">
              <li class="page-item" id="question1" ng-click="b(1)"><a class="page-link" id="ab1" href="#">1</a></li>
              <li class="page-item" id="question2" ng-click="b(2)"><a class="page-link" id="ab2" href="#">2</a></li>
              <li class="page-item" id="question3" ng-click="b(3)"><a class="page-link" id="ab3" href="#">3</a></li>
              <li class="page-item" id="question4" ng-click="b(4)"><a class="page-link" id="ab4" href="#">4</a></li>
              <li class="page-item" id="question5" ng-click="b(5)"><a class="page-link" id="ab5" href="#">5</a></li>
              <li class="page-item" id="question6" ng-click="b(6)"><a class="page-link" id="ab6" href="#">6</a></li>
              <li class="page-item" id="question7" ng-click="b(7)"><a class="page-link" id="ab7" href="#">7</a></li>
              <li class="page-item" id="question8" ng-click="b(8)"><a class="page-link" id="ab8" href="#">8</a></li>
              <li class="page-item" id="question9" ng-click="b(9)"><a class="page-link" id="ab9" href="#">9</a></li>
              <li class="page-item" id="question10" ng-click="b(10)"><a class="page-link" id="ab10" href="#">10</a></li>
            </ul> {% endcomment %}
            {% if request.LANGUAGE_CODE == 'uz' %}
            {% verbatim %}
            <div class="question-container">
              <h4 class="page-content">{{question.number}} - savol<br/>{{question.name_uz_uz}}</h4>
              <img ng-if="question.image!=''" ng-show="question.image" src="/media/{{question.image}}" class="question-image" width="30%">
              <div class="list-group" style="text-align:start" ng-repeat="answer in answers">
                  <a ng-click="ok(answer)" id="answer{{answer.id}}" href="#" class="list-group-item list-group-item-action" ng-show="answer.name_uz_uz!=''" ng-class="!question.selected_answer?'':answer.right?'list-group-item-success disabledDiv':'list-group-item-danger disabledDiv'"><input type="radio" ng-model='mValue' ng-checked='mValue === {{answer.id}}' name="answer{{question_number}}" value="answer{{answer.id}}"> {{answer.name_uz_uz}}</a> 
                </div>
            </div>
            {% endverbatim %}
            {% else %}
            {% if request.LANGUAGE_CODE == 'ru' %}
            {% verbatim %}
            <div class="question-container">
              <h4 class="page-content">Вопрос {{question.number}}<br/>{{question.name_ru_ru}}</h4>
              <img ng-if="question.image!=''" ng-show="question.image" src="/media/{{question.image}}" class="question-image" width="30%">
              <div class="list-group" style="text-align:start" ng-repeat="answer in answers">
                  <a ng-click="ok(answer)" id="answer{{answer.id}}" href="#" class="list-group-item list-group-item-action" ng-show="answer.name_ru_ru!=''" ng-class="!question.selected_answer?'':answer.right?'list-group-item-success disabledDiv':'list-group-item-danger disabledDiv'"><input type="radio" ng-model='mValue' ng-checked='mValue === {{answer.id}}' name="answer{{question_number}}" value="answer{{answer.id}}"> {{answer.name_ru_ru}}</a> 
                </div>
            </div>
            {% endverbatim %}
            {% else %}
            {% verbatim %}
            <div class="question-container">
              <h4 class="page-content">Question {{question.number}}<br/>{{question.name_en_us}}</h4>
              <img ng-if="question.image!=''" ng-show="question.image!=''" src="/media/{{question.image}}" class="question-image" width="30%">
              <div class="list-group" style="text-align:start" ng-repeat="answer in answers">
                  <a ng-click="ok(answer)" id="answer{{answer.id}}" href="#" class="list-group-item list-group-item-action" ng-show="answer.name_en_us!=''" ng-class="!question.selected_answer?'':answer.right?'list-group-item-success disabledDiv':'list-group-item-danger disabledDiv'"><input type="radio" ng-model='mValue' ng-checked='mValue === {{answer.id}}' name="answer{{question_number}}" value="answer{{answer.id}}"> {{answer.name_en_us}}</a> 
              </div>
            </div>
            {% endverbatim %}
            {% endif %}
            {% endif %}
        </div>
    </div>
    <script>
        if(window.screen.availWidth>1366){
            document.getElementsByClassName('pagination')[0].className ="pagination justify-content-center pagination-lg";
        }
        else{
            if(window.screen.availWidth>768&&window.screen.availWidth<1366){
                document.getElementsByClassName('pagination')[0].className ="pagination justify-content-center";
            }
            else{
                document.getElementsByClassName('pagination')[0].className ="pagination justify-content-center";
            }
        }
    </script>
    {%else%}
    <!-- Hero Section -->
    <div class="tests-hero">
      <div class="tests-hero-content">
        {% if type == 'type' %}
          {% if request.LANGUAGE_CODE == 'uz' %}
          <h1 class="tests-hero-title">Testlar</h1>
          <p class="tests-hero-subtitle">Bilimingizni sinab ko'ring va yangi ko'nikmalar oling</p>
          {% else %}
          {% if request.LANGUAGE_CODE == 'ru' %}
          <h1 class="tests-hero-title">Тесты</h1>
          <p class="tests-hero-subtitle">Проверьте свои знания и получите новые навыки</p>
          {% else %}
          <h1 class="tests-hero-title">Tests</h1>
          <p class="tests-hero-subtitle">Test your knowledge and gain new skills</p>
          {% endif %}
          {% endif %}
        {%else%}
          {% if request.LANGUAGE_CODE == 'uz' %}
          {% verbatim %}
          <h1 class="tests-hero-title">{{type_data.name_uz_uz}}</h1>
          <p class="tests-hero-subtitle">Bilimingizni sinab ko'ring</p>
          {% endverbatim %}
          {% else %}
          {% if request.LANGUAGE_CODE == 'ru' %}
          {% verbatim %}
          <h1 class="tests-hero-title">{{type_data.name_ru_ru}}</h1>
          <p class="tests-hero-subtitle">Проверьте свои знания</p>
          {% endverbatim %}
          {% else %}
          {% verbatim %}
          <h1 class="tests-hero-title">{{type_data.name_en_us}}</h1>
          <p class="tests-hero-subtitle">Test your knowledge</p>
          {% endverbatim %}
          {% endif %}
          {% endif %}
        {%endif%}
      </div>
    </div>

    <section id="services">
      <div class="services container">
        <div class="service-top">
          <h2>
            <a href="https://play.google.com/store/apps/details?id=uzbavtotest.complexprogrammer.uz" target="_blank">
              {% if type == 'type' %}
                {% if request.LANGUAGE_CODE == 'uz' %}
                Testlar
                {% else %}
                {% if request.LANGUAGE_CODE == 'ru' %}
                Тесты
                {% else %}
                Tests
                {% endif %}
                {% endif %}
              {%else%}
                {% if request.LANGUAGE_CODE == 'uz' %}
                {% verbatim %}
                {{type_data.name_uz_uz}}
                {% endverbatim %}
                {% else %}
                {% if request.LANGUAGE_CODE == 'ru' %}
                {% verbatim %}
                {{type_data.name_ru_ru}}
                {% endverbatim %}
                {% else %}
                {% verbatim %}
                {{type_data.name_en_us}}
                {% endverbatim %}
                {% endif %}
                {% endif %}
              {%endif%}
            </a>
            <br />
            <br />
            <a href="https://play.google.com/store/apps/details?id=uzbavtotest.complexprogrammer.uz" target="_blank">
                <img src="/static/img/google-play.svg" />
            </a>
          </h2>
        </div>
        <div class="service-bottom">
          {%for item in data%}
              {% if item.image != '' %}
              <div class="service-item">
                <div class="icon">
                  <img style="block-size: 100%;inline-size: 100%;object-fit: cover;" src="/media/{{item.image}}" />
                </div>
              {% else %}
              <div class="service-item">
                <div class="icon">
                  <img style="block-size: 100%;inline-size: 100%;object-fit: cover;" src="/media/projects/images/avtotest.jpg" />
                </div>
              {% endif %}
              {% if request.LANGUAGE_CODE == 'uz' %}
                <h2>{{item.name_uz_uz}}</h2>
              {% else %}
              {% if request.LANGUAGE_CODE == 'ru' %}
                <h2>{{item.name_ru_ru}}</h2>  
              {% else %}
                <h2>{{item.name_en_us}}</h2>
              {% endif %}
              {% endif %}
              <div class="C0mplexButton Success" style="margin-block-end: 0px;">
                {% if type == 'type' %}
                <a href="/tests?type_id={{ item.id }}">
                  <span></span>
                  <span></span>
                  <span></span>
                  <span></span>
                  <i class="material-icons">&#9758;</i>
                  Enter
                  <div class="spinner-border" role="status"></div>
                </a>
                {% endif %}
                {% if type == 'group' %}
                  <a href="/tests?group_id={{ item.id }}">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <i class="material-icons">&#9758;</i>
                    Enter
                    <div class="spinner-border" role="status"></div>
                  </a>
                {% endif %}
                {% if type == 'book' %}
                  <a href="/tests?book_id={{ item.id }}">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <i class="material-icons">&#9758;</i>
                    Enter
                    <div class="spinner-border" role="status"></div>
                  </a>
                {% endif %}
                {% if type == 'topic' %}
                  <a href="/tests?topic_id={{ item.id }}">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <i class="material-icons">&#9758;</i>
                    Enter
                    <div class="spinner-border" role="status"></div>
                  </a>
                {% endif %}
              </div>
            </div>
          {%endfor%}
        </div>
      </div>
    </section>
    {% endif %}
    <hr />
    {% include "comment_form.html" %}
    <script>
        var myModal = new bootstrap.Modal(document.getElementById('staticBackdrop'), {
          keyboard: false
        });
        function hexHtmlToString(str) {
            var REG_HEX = /&#x([a-fA-F0-9]+);/g;
            console.log(REG_HEX)
            return str.replace(REG_HEX, function(match, grp){
                var num = parseInt(grp, 16);
                console.log(String.fromCharCode(num))
                return String.fromCharCode(num);
            });
        }
          var app = angular.module("App", []);
          app.controller("tests", ["$scope", "$http", "$filter", function ($scope, $http, $filter) {
            $scope._type='{{ type|safe }}';
            $scope.type_data=JSON.parse('{{ type_data|safe }}');
            console.log($scope.type_data)
                    if($scope._type=="group"){
                      $scope.type=JSON.parse('{{ type_data|safe }}');
                    }
                    if($scope._type=="book"){
                      $scope.group=JSON.parse('{{ type_data|safe }}');
                    }
                    if($scope._type=="topic"){
                      $scope.book=JSON.parse('{{ type_data|safe }}');
                    }
                    if($scope._type=="question"){
                          $scope.topic=JSON.parse('{{ type_data|safe }}');
                          var timeH = document.getElementById("timer");
                          $scope.x=0
                          $scope.isPaused = false;
                          $scope.timeout = false;
                          $scope.question_number=1;
                          LoadTopics($scope.topic.book_id);
                          $scope.topic_number=$scope.topic.number;
                          $scope.topic_id=$scope.topic.id;
                          $scope.time=3600;
                          $scope.togri_javob_soni=0;
                          $scope.notogri_javob_soni=0;
                          $scope.questions=[];
                          $scope.selected_answers=[];
                          //setCookie("selected_answers", JSON.stringify($scope.selected_answers), 365);
                          $scope.prev=function(){
                              if($scope.question_number>1){
                                  $scope.question_number=$scope.question_number-1
                              }
                              myFunction($scope.question_number);
                              set_color()
                          }
                          $scope.next=function(){
                              if($scope.question_number<$scope.questions.length){
                                  $scope.question_number=$scope.question_number+1
                              }
                              myFunction($scope.question_number);
                              set_color()
                          }
                          function set_color(){
                            $scope.questions.forEach((element) =>
                            {
                                if(element.selected_answer){
                                  if(element.selected_answer.right){
                                      document.getElementById('ab'+element.id).classList.add('bg-success');
                                  }
                                  else{
                                      document.getElementById('ab'+element.id).classList.add('bg-danger');
                                  }
                                }
                            });
                          }
                          if($scope.topic_id!=0){
                              checkJavoblar();
                              LoadData();
                          }
                          $scope.mValue=null;
                          $scope.back=function(){
                              window.location.href="/tests?book_id="+$scope.topic.book_id;
                          }
                          $scope.changeTopic=function(value){
                            if(value<=$scope.topics.length){
                              $scope.topic=$scope.topics.find(word => word.number == value)
                              if($scope.topic.number==value)
                              {
                                  setCookie("selected_answers", JSON.stringify($scope.selected_answers.filter(word => word.topic_id != $scope.topic.id)), 365);
                              }
                              window.location.href="/tests?topic_id="+$scope.topic.id;
                            }
                            else{

                            }

                          }
                          $scope.showModal=function(){
                              $scope.isPaused = true;
                              $scope.timeout = true;
                              myModal.show();
          
                          }
                          $('#timer').on('click', function(e) {
                            e.preventDefault();
                            //$scope.isPaused = !$scope.isPaused;
                          });
                          $("#staticBackdrop").on('hide.bs.modal', function(){
                              $scope.isPaused = false;
                          });
                          function startTimer(timeSecond){
                              displayTime(timeSecond);
                              const countDown = setInterval(() => {
                                  if(!$scope.isPaused) {
                                    timeSecond--;
                                    $scope.time=timeSecond;
                                    displayTime(timeSecond);
                                    if (timeSecond == 0 || timeSecond < 1) {
                                      endCount();
                                      clearInterval(countDown);
                                    }
                                  }
                              }, 1000);
                          }
          
                          function displayTime(second) {
                            const min = Math.floor(second / 60);
                            const sec = Math.floor(second % 60);
                            timeH.innerHTML = `${min < 10 ? "0" : ""}${min}:${sec < 10 ? "0" : ""}${sec}`;
                          }
          
                          function endCount() {
                            timeH.innerHTML = "Vaqt tugadi";
                            myModal.show();
                          }
                          function setCookie(cname, cvalue, exdays) {
                            const d = new Date();
                            d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                            let expires = "expires="+d.toUTCString();
                            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
                          }
          
                          function getCookie(cname) {
                              let name = cname + "=";
                              let ca = document.cookie.split(';');
                              for(let i = 0; i < ca.length; i++) {
                                  let c = ca[i];
                                  while (c.charAt(0) == ' ') {
                                      c = c.substring(1);
                                  }
                                  if (c.indexOf(name) == 0) {
                                      return c.substring(name.length, c.length);
                                  }
                              }
                              return "";
                          }
                          function checkJavoblar() {
                              if(getCookie("selected_answers")){
                                  $scope.selected_answers = JSON.parse(getCookie("selected_answers"));
                              }
                              $scope.selected_answers.filter(word => word.topic_id == $scope.topic_id).forEach((element) =>{
                                  if(element.time<$scope.time)
                                  {
                                      $scope.time=element.time;
                                  }
                              });
                              startTimer($scope.time);
          
                          }
                        $scope.b=function(value){
                          $scope.x=0
                          if(value>$scope.question_number){
                              $scope.x=value-$scope.question_number
                          }
                          else{
                              $scope.x=$scope.question_number-value
                          }
                          if(value>1&&value<$scope.questions.length){
                              myFunction(value);
                          }
                        }
                        function myFunction(value) {
                              $scope.question_number=value;
                              $scope.question=$scope.questions.find(element => element.number == $scope.question_number);
                              LoadAnswers($scope.question.id)
                              if($scope.selected_answers.find(element => element.question_id == $scope.question.id))
                              {
                                $scope.question.selected_answer=$scope.selected_answers.find(element => element.question_id == $scope.question.id);
                              }
                              $scope.mValue=$scope.question.selected_answer.id;
                              document.getElementById('click').play();
                              {% comment %} var element = document.getElementsByClassName('page-item');
                                  for(var i = 0; i < element.length; i++)
                                  {
                                      element[i].classList.remove('active');
                                  } {% endcomment %}
                              //document.getElementById('question'+$scope.question_number).classList.add('active');
                          }
                          function setJavob(answer)
                          {
                              var obj = {
                                topic_id: $scope.topic_id,
                                question_id: $scope.question.id,
                                id:answer.id,
                                right:answer.right,
                                time: $scope.time,
                              };
          
                              if(!$scope.selected_answers.find(element => element.question_id == obj.question_id))
                              {
                                  $scope.selected_answers.push(obj);
                                  setCookie("selected_answers", JSON.stringify($scope.selected_answers), 365);
                              }
          
                              $scope.mValue=answer.id;
                              if(answer.right){
                                  $scope.togri_javob_soni=$scope.togri_javob_soni+1;
                                  document.getElementById('right').play();
                                  document.getElementById('answer'+answer.id).classList.add('list-group-item-success');
                                  document.getElementById('ab'+$scope.question.id).classList.add('bg-success');
                                  alertify.success("To`g`ri javob");
                              }
                              else{
                                  $scope.notogri_javob_soni=$scope.notogri_javob_soni+1;
                                  document.getElementById('wrong').play();
                                  document.getElementById('answer'+answer.id).classList.add('list-group-item-danger');
                                  document.getElementById('ab'+$scope.question.id).classList.add('bg-danger');
                                  alertify.error("Noto`g`ri javob");
                              }
                              for(var i = 0; i < $scope.answers.length; i++)
                              {
                                  if($scope.answers[i].right){
                                    document.getElementById('answer'+$scope.answers[i].id).classList.add('list-group-item-success');
                                  }
                                  document.getElementById('answer'+$scope.answers[i].id).classList.add('disabledDiv');
                              }
                              if($scope.selected_answers.filter(word => word.topic_id == $scope.topic_id).length==$scope.questions.length)
                              {
                                  $scope.isPaused = true;
                                  $scope.timeout = false;
                                  myModal.show();
                              }
                          }
                      $scope.ok=function(answer){
                          setJavob(answer);
                          //setTimeout(myFunction, 3000, $scope.question_number+1);
                      }
          
                        function LoadData(){
                            document.getElementById('conn').style.visibility = "visible";
                            $('#hh').modal({
                                    backdrop: 'static',
                                    keyboard: false
                              })
                                $http({
                                    method: 'GET',
                                    url: "/GetQuestions?topic_id="+$scope.topic_id,
                                    dataType: "json"
                                }).then(function (d) {
                                        let number=0;
                                        d.data.forEach((item) => {
                                          selected_answer='';
                                          if($scope.selected_answers.find(element => element.question_id == item.id))
                                          {
                                              selected_answer=$scope.selected_answers.find(element => element.question_id == item.id);
                                          }
                                          item.selected_answer=selected_answer
                                          $scope.questions.push(item);
                                        });
                                        $scope.questions=$scope.questions.sort(function(a, b){return a.number-b.number});
                                        $scope.questions.forEach((element) =>
                                        {
                                            if(element.number>number&&number==element.number-1&&element.selected_answer)
                                            {
                                                number=element.number;
                                            }
                                            if(element.selected_answer){
                                              if(element.selected_answer.right){
                                                  $scope.togri_javob_soni=$scope.togri_javob_soni+1;
                                              }
                                              else{
                                                  $scope.notogri_javob_soni=$scope.notogri_javob_soni+1;
                                              }
                                            }
                                        });
                                        if($scope.selected_answers.filter(word => word.topic_id == $scope.topic_id).length==$scope.questions.length)
                                        {
                                            $("#hh").modal('hide');
                                            document.getElementById('conn').style.visibility = "hidden";
                                            $scope.isPaused = true;
                                            $scope.timeout = false;
                                            myModal.show();
                                        }
                                        $scope.question_number=number+1;
                                        myFunction($scope.question_number)
              
              
                                $("#hh").modal('hide');
                                document.getElementById('conn').style.visibility = "hidden";
                            }, function (error) {
                                  $("#hh").modal('hide');
                                  document.getElementById('conn').style.visibility = "hidden";
                                console.log("error in GetQuestions -> ", error);
                                alertify.error("Xatolik yuz berdi");
                            });
                        }
                        function LoadTopics(book_id){
                          document.getElementById('conn').style.visibility = "visible";
                          $('#hh').modal({
                                  backdrop: 'static',
                                  keyboard: false
                            })
                              $http({
                                  method: 'GET',
                                  url: "/GetTopics?book_id="+book_id,
                                  dataType: "json"
                              }).then(function (d) {
                                      $scope.topics=d.data
                              $("#hh").modal('hide');
                              document.getElementById('conn').style.visibility = "hidden";
                          }, function (error) {
                                $("#hh").modal('hide');
                                document.getElementById('conn').style.visibility = "hidden";
                              console.log("error in GetTopics -> ", error);
                              alertify.error("Xatolik yuz berdi");
                          });
                        }
                        function LoadQuestions(number){
              
                        }
                        function LoadAnswers(question_id){
                          document.getElementById('conn').style.visibility = "visible";
                          $('#hh').modal({
                                  backdrop: 'static',
                                  keyboard: false
                            })
                              $http({
                                  method: 'GET',
                                  url: "/GetAnswers?question_id="+question_id,
                                  dataType: "json"
                              }).then(function (d) {
                                      $scope.answers=d.data
                              $("#hh").modal('hide');
                              document.getElementById('conn').style.visibility = "hidden";
                          }, function (error) {
                                $("#hh").modal('hide');
                                document.getElementById('conn').style.visibility = "hidden";
                              console.log("error in GetAnswers -> ", error);
                              alertify.error("Xatolik yuz berdi");
                          });
                        }
                    }
              }]);
  </script>
  <ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-7773722896374259"
     data-ad-slot="2479701367"></ins>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
    <ins class="adsbygoogle"
    style="display:block; text-align:center;"
    data-ad-format="autorelaxed"
    data-ad-client="ca-pub-4137874891184814"
    data-ad-slot="4202531555"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <ins class="adsbygoogle"
      style="display:block; text-align:center;"
      data-ad-format="fluid"
      data-ad-layout-key="-an-4i-cp+a2+21k"
      data-ad-client="ca-pub-7773722896374259"
      data-ad-slot="4679993061"></ins>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
    <ins class="adsbygoogle"
    style="display:block; text-align:center;"
    data-ad-format="fluid"
    data-ad-layout-key="-6t+ed+2i-1n-4w"
    data-ad-client="ca-pub-4137874891184814"
    data-ad-slot="7442938415"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <!-- Display 1 -->
  <ins class="adsbygoogle"
    style="display:block; text-align:center;"
    data-ad-client="ca-pub-7773722896374259"
    data-ad-slot="3869366477"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
    <!-- 1 chi abzast Mobil -->
    <ins class="adsbygoogle"
    style="display:block; text-align:center;"
    data-ad-client="ca-pub-4137874891184814"
    data-ad-slot="2799587029"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</body>
</html>