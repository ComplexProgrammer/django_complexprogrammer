{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
{% get_available_languages as LANGUAGES %}
{% get_language_info_list for LANGUAGES as languages %}
<div class="fixed-top">
    <div class="position-relative" style="margin-top:50px;">
      <div class="position-absolute top-0 end-0 translate-middle">
        <div class="container">
          <div class="row">
            <div class="col">
              <form action="{% url 'set_language' %}" method="POST">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ redirect_to }}">
                <select class="form-select form-select-lg mb-3" aria-label=".form-select-lg example" name="language" onchange="this.form.submit()">
                  {% for language in languages %}
                  <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                    {{ language.name_local }}
                    {% if LANGUAGE_CODE == 'en' %}
                    <img src="https://ipapi.co/static/images/flags/us.png" />
                    {% else %}
                    <img src="https://ipapi.co/static/images/flags/{{LANGUAGE_CODE}}.png" />
                    {% endif %}
                  </option>
                  {% endfor %}
                </select>
              </form>
            </div>
            <div class="col-1">
              {% if LANGUAGE_CODE == 'en' %}
              <img style="object-fit: cover;" src="https://ipapi.co/static/images/flags/us.png" />
              {% else %}
              <img style="object-fit: cover;" src="https://ipapi.co/static/images/flags/{{LANGUAGE_CODE}}.png" />
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "e815a36ng3");
</script>
    <!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(90624869, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/90624869" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
    <!-- Yandex.RTB -->
<script>window.yaContextCb=window.yaContextCb||[]</script>
<script src="https://yandex.ru/ads/system/context.js" async></script>
<meta name="yandex-verification" content="6bd5e2cc7d84e7b1" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="icon" sizes="16x16" href="/static/img/globe.jpg">
<link rel="stylesheet" href="/static/css/C0mplexButtonStyle.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css"/>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/semantic.min.css"/>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.min.css"/>
<script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    :root {
        --bg-color: #0a0a0f;
        --text-color: #ffffff;
        --card-bg: rgba(255, 255, 255, 0.05);
        --border-color: rgba(255, 255, 255, 0.1);
        --accent-color: #00ffff;
        --accent-secondary: #ff00ff;
        --accent-glow: rgba(0, 255, 255, 0.3);
    }

    [data-theme="light"] {
        --bg-color: #f0f4f8;
        --text-color: #1a1a2e;
        --card-bg: rgba(255, 255, 255, 0.7);
        --border-color: rgba(0, 0, 0, 0.1);
        --accent-color: #667eea;
        --accent-secondary: #764ba2;
        --accent-glow: rgba(102, 126, 234, 0.3);
    }

    body {
        font-family: 'Poppins', sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        position: relative;
        overflow-x: hidden;
        min-height: 100vh;
        transition: background-color 0.5s ease, color 0.5s ease;
    }

    #threejs-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        opacity: 0.8;
    }

    .container {
        position: relative;
        z-index: 10;
    }

    .glass-card {
        background: var(--card-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid var(--border-color);
        border-radius: 20px;
        padding: 2rem;
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        transition: all 0.3s ease;
        animation: fadeInUp 0.8s ease;
        margin-top: 2rem;
    }

    .glass-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 50px 0 rgba(0, 0, 0, 0.5);
        border-color: var(--accent-color);
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes pulse {
        0%, 100% {
            box-shadow: 0 0 20px var(--accent-glow);
        }
        50% {
            box-shadow: 0 0 40px var(--accent-glow);
        }
    }

    @keyframes float {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-10px);
        }
    }

    h2 {
        font-family: 'Orbitron', sans-serif;
        font-weight: 700;
        background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-transform: uppercase;
        letter-spacing: 2px;
        animation: float 3s ease-in-out infinite;
    }

    .ip-display {
        font-family: 'Orbitron', monospace;
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--accent-secondary);
        text-shadow: 0 0 20px var(--accent-glow);
        animation: pulse 2s infinite;
    }

    .table {
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        overflow: hidden;
        border: 1px solid var(--border-color);
    }

    .table thead th {
        background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary));
        color: white;
        font-weight: 600;
        padding: 1.5rem;
        border: none;
    }

    .table tbody tr {
        border-bottom: 1px solid var(--border-color);
        transition: all 0.3s ease;
    }

    .table tbody tr:hover {
        background: rgba(0, 255, 255, 0.1);
        transform: scale(1.01);
    }

    .table tbody td {
        padding: 1rem 1.5rem;
        color: var(--text-color);
        border: none;
    }

    .table tbody td:first-child {
        font-weight: 600;
        color: var(--accent-color);
    }

    .form-control {
        background: rgba(255, 255, 255, 0.05);
        border: 2px solid var(--border-color);
        border-radius: 10px;
        color: var(--text-color);
        padding: 0.75rem 1rem;
        transition: all 0.3s ease;
        font-family: 'Orbitron', monospace;
    }

    .form-control:focus {
        background: rgba(255, 255, 255, 0.08);
        border-color: var(--accent-color);
        color: var(--text-color);
        box-shadow: 0 0 20px var(--accent-glow);
    }

    .btn {
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.9rem;
    }

    .btn-primary {
        background: linear-gradient(135deg, var(--accent-color), #667eea);
        box-shadow: 0 4px 15px var(--accent-glow);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 25px var(--accent-glow);
    }

    .btn-success {
        background: linear-gradient(135deg, #00ff88, #00cc88);
        box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
    }

    .btn-success:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 25px rgba(0, 255, 136, 0.5);
    }

    .C0mplexButton {
        animation: fadeInUp 1s ease;
    }

    img[src*="flags"] {
        border-radius: 5px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
    }

    img[src*="flags"]:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 25px rgba(0, 0, 0, 0.5);
    }

    .fixed-top {
        z-index: 100;
    }

    .theme-toggle {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1000;
        background: var(--card-bg);
        backdrop-filter: blur(10px);
        border: 2px solid var(--accent-color);
        color: var(--text-color);
        padding: 12px 24px;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
        box-shadow: 0 4px 15px var(--accent-glow);
    }

    .theme-toggle:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 25px var(--accent-glow);
    }

    @media (max-width: 768px) {
        .glass-card {
            padding: 1rem;
        }

        h2 {
            font-size: 1.5rem;
        }

        .ip-display {
            font-size: 1.2rem;
        }

        .table tbody td {
            padding: 0.75rem;
            font-size: 0.9rem;
        }
    }

    ::-webkit-scrollbar {
        width: 10px;
    }

    ::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
    }

    ::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, var(--accent-color), var(--accent-secondary));
        border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, var(--accent-secondary), var(--accent-color));
    }
</style>
<meta charset="UTF-8">
<title>Ip Finder</title>
<!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4137874891184814"
 crossorigin="anonymous"></script> -->
 <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7773722896374259"
     crossorigin="anonymous"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8DHWL20H58"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8DHWL20H58');
</script>
        <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NW763C2');</script>
<!-- End Google Tag Manager -->
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyDpWaFi5QLTNc-yY0ieMKJtGOmbm2ofBm4",
    authDomain: "c0mplex.firebaseapp.com",
    projectId: "c0mplex",
    storageBucket: "c0mplex.appspot.com",
    messagingSenderId: "755681568857",
    appId: "1:755681568857:web:102b1b733df55baefe2948",
    measurementId: "G-H8XGTS4B9J"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>
<script>
 function IpFinder(){
    window.location.href='/ip?ip='+document.getElementById('ip').value
 }
 function MyIP(){
    window.location.href='/ip'
 }
</script>
</head>
<body>
    <canvas id="threejs-canvas"></canvas>

    <button id="themeButton" class="theme-toggle" onclick="toggleTheme()">
        <i class="fas fa-moon"></i> <span id="themeText">Light Mode</span>
    </button>

    <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-layout="in-article"
        data-ad-format="fluid"
        data-ad-client="ca-pub-7773722896374259"
        data-ad-slot="2303661293"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <!-- <ins class="adsbygoogle"
    style="display:block; text-align:center;"
    data-ad-layout="in-article"
    data-ad-format="fluid"
    data-ad-client="ca-pub-4137874891184814"
    data-ad-slot="6832564320"></ins>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
  </script> -->
    <div id="conn" style="visibility:hidden;position:absolute;margin-left:45%;margin-top:20%;z-index:9999">
        <img src="/static/img/buffering.gif" />
    </div>
    <input id="hh" type="hidden" />
    <div class="container">
        <div class="C0mplexButton float-end">
            <a href="#" onclick="window.history.back(); return false;">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                X
            </a>
        </div>
        <div class="row">
            <div class="col-sm-6"></div>
            <div class="col-sm-6">
                <div class="glass-card">
                    <div class="d-flex flex-row align-items-center justify-content-between mb-3">
                        <h2 class="p-2 m-0">IP Finder</h2>
                        <h2 class="p-2 m-0 ip-display">{{ip}}</h2>
                        <div class="p-2">
                            <a href="https://play.google.com/store/apps/details?id=ip.complexprogrammer.uz" target="_blank">
                            <img src="/static/img/google-play.svg" style="max-width: 150px;" />
                        </a>
                    </div>
                    </div>
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th><input type="text" id="ip" value="{{data.ip}}" class="form-control"></th>
                            <th>
                                <button onclick="IpFinder()" class="btn btn-primary">IP Lookup</button>
                                <button onclick="MyIP()" class="btn btn-success">My IP</button>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-show="data.ip!=null">
                            <td>IP Address</td>
                            <td>{{data.ip}}</td>
                        </tr>
                        <tr ng-show="data.city!=null">
                            <td>City</td>
                            <td>{{data.city}}</td>
                        </tr>
                        <tr ng-show="data.region!=null">
                            <td>Region</td>
                            <td>{{data.region}}</td>
                        </tr>
                        <tr ng-show="data.region_code!=null">
                            <td>Region code</td>
                            <td>{{data.region_code}}</td>
                        </tr>
                        <tr ng-show="data.country_code!=null">
                            <td>Flag</td>
                            <td><img src="https://ipapi.co/static/images/flags/{{data.country_code|lower}}.png"/></td>
                        </tr>
                        <tr ng-show="data.country_code!=null">
                            <td>Country code</td>
                            <td>{{data.country_code}}</td>
                        </tr>
                        <tr ng-show="data.country_code_iso3!=null">
                            <td>Country code iso3</td>
                            <td>{{data.country_code_iso3}}</td>
                        </tr>
                        <tr ng-show="data.country_name!=null">
                            <td>Country name</td>
                            <td>{{data.country_name}}</td>
                        </tr>
                        <tr ng-show="data.country_capital!=null">
                            <td>Country capital</td>
                            <td>{{data.country_capital}}</td>
                        </tr>
                        <tr ng-show="data.country_tld!=null">
                            <td>Country tld</td>
                            <td>{{data.country_tld}}</td>
                        </tr>
                        <tr ng-show="data.continent_code!=null">
                            <td>Continent code</td>
                            <td>{{data.continent_code}}</td>
                        </tr>
                        <tr ng-show="data.in_eu!=null">
                            <td>in eu</td>
                            <td>{{data.in_eu}}</td>
                        </tr>
                        <tr ng-show="data.postal!=null">
                            <td>Postal</td>
                            <td>{{data.postal}}</td>
                        </tr>
                        <tr ng-show="data.latitude!=null">
                            <td>Latitude</td>
                            <td>{{data.latitude}}</td>
                        </tr>
                        <tr ng-show="data.longitude!=null">
                            <td>Longitude</td>
                            <td>{{data.longitude}}</td>
                        </tr>
                        <tr ng-show="data.timezone!=null">
                            <td>Time zone</td>
                            <td>{{data.timezone}}</td>
                        </tr>
                        <tr ng-show="data.utc_offset!=null">
                            <td>Utc offset</td>
                            <td>{{data.utc_offset}}</td>
                        </tr>
                        <tr ng-show="data.country_calling_code!=null">
                            <td>Country calling code</td>
                            <td>{{data.country_calling_code}}</td>
                        </tr>
                        <tr ng-show="data.currency!=null">
                            <td>Currency</td>
                            <td>{{data.currency}}</td>
                        </tr>
                        <tr ng-show="data.currency_name!=null">
                            <td>Currency name</td>
                            <td>{{data.currency_name}}</td>
                        </tr>
                        <tr ng-show="data.languages!=null">
                            <td>Languages</td>
                            <td>{{data.languages}}</td>
                        </tr>
                        <tr ng-show="data.country_area!=null">
                            <td>Country area</td>
                            <td>{{data.country_area}}</td>
                        </tr>
                        <tr ng-show="data.country_population!=null">
                            <td>Country population</td>
                            <td>{{data.country_population}}</td>
                        </tr>
                        <tr ng-show="data.asn!=null">
                            <td>asn</td>
                            <td>{{data.asn}}</td>
                        </tr>
                        <tr ng-show="data.org!=null">
                            <td>org</td>
                            <td>{{data.org}}</td>
                        </tr>
                        <tr ng-show="data.hostname!=null">
                            <td>hostname</td>
                            <td>{{data.hostname}}</td>
                        </tr>
                    </tbody>
                </table>
                </div>
            </div>
        </div>
    </div>
    {% include 'comment_form.html' %}
    <ins class="adsbygoogle"
    style="display:block; text-align:center;"
    data-ad-format="autorelaxed"
    data-ad-client="ca-pub-7773722896374259"
    data-ad-slot="2479701367"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <!-- <ins class="adsbygoogle"
    style="display:block; text-align:center;"
    data-ad-format="autorelaxed"
    data-ad-client="ca-pub-4137874891184814"
    data-ad-slot="4202531555"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script> -->
    <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-format="fluid"
        data-ad-layout-key="-an-4i-cp+a2+21k"
        data-ad-client="ca-pub-7773722896374259"
        data-ad-slot="4679993061"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <!-- <ins class="adsbygoogle"
    style="display:block; text-align:center;"
    data-ad-format="fluid"
    data-ad-layout-key="-6t+ed+2i-1n-4w"
    data-ad-client="ca-pub-4137874891184814"
    data-ad-slot="7442938415"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script> -->
    <!-- Display 1 -->
    <ins class="adsbygoogle"
    style="display:block; text-align:center;"
    data-ad-client="ca-pub-7773722896374259"
    data-ad-slot="3869366477"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <!-- 1 chi abzast Mobil -->
    <!-- <ins class="adsbygoogle"
    style="display:block; text-align:center;"
    data-ad-client="ca-pub-4137874891184814"
    data-ad-slot="2799587029"
    data-ad-format="auto"
    data-full-width-responsive="true"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script> -->

    <script>
    // Three.js 3D Globe Animation
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({
        canvas: document.getElementById('threejs-canvas'),
        alpha: true,
        antialias: true
    });

    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio);

    // Create Earth-like sphere (globe)
    const globeGeometry = new THREE.SphereGeometry(15, 64, 64);
    const globeMaterial = new THREE.MeshBasicMaterial({
        color: 0x00ffff,
        wireframe: true,
        transparent: true,
        opacity: 0.3
    });
    const globe = new THREE.Mesh(globeGeometry, globeMaterial);
    scene.add(globe);

    // Create particles
    const particlesGeometry = new THREE.BufferGeometry();
    const particlesCount = 5000;
    const posArray = new Float32Array(particlesCount * 3);

    for(let i = 0; i < particlesCount * 3; i++) {
        posArray[i] = (Math.random() - 0.5) * 100;
    }

    particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));

    const particlesMaterial = new THREE.PointsMaterial({
        size: 0.05,
        color: 0x00ffff,
        transparent: true,
        opacity: 0.6,
        blending: THREE.AdditiveBlending
    });

    const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
    scene.add(particlesMesh);

    // Add connection lines
    const linesGeometry = new THREE.BufferGeometry();
    const linesCount = 100;
    const linesPositions = [];

    for(let i = 0; i < linesCount; i++) {
        const x1 = (Math.random() - 0.5) * 50;
        const y1 = (Math.random() - 0.5) * 50;
        const z1 = (Math.random() - 0.5) * 50;
        const x2 = (Math.random() - 0.5) * 50;
        const y2 = (Math.random() - 0.5) * 50;
        const z2 = (Math.random() - 0.5) * 50;

        linesPositions.push(x1, y1, z1, x2, y2, z2);
    }

    linesGeometry.setAttribute('position', new THREE.Float32BufferAttribute(linesPositions, 3));

    const linesMaterial = new THREE.LineBasicMaterial({
        color: 0xff00ff,
        transparent: true,
        opacity: 0.2
    });

    const lines = new THREE.LineSegments(linesGeometry, linesMaterial);
    scene.add(lines);

    camera.position.z = 40;

    let mouseX = 0;
    let mouseY = 0;

    document.addEventListener('mousemove', (event) => {
        mouseX = (event.clientX / window.innerWidth) * 2 - 1;
        mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
    });

    function animate() {
        requestAnimationFrame(animate);

        // Rotate globe
        globe.rotation.y += 0.002;
        globe.rotation.x += 0.001;

        // Rotate particles
        particlesMesh.rotation.y += 0.0008;
        particlesMesh.rotation.x += 0.0004;

        // Rotate lines
        lines.rotation.x += 0.0005;
        lines.rotation.y += 0.001;

        // Interactive camera movement
        camera.position.x += (mouseX * 10 - camera.position.x) * 0.05;
        camera.position.y += (mouseY * 10 - camera.position.y) * 0.05;
        camera.lookAt(scene.position);

        renderer.render(scene, camera);
    }

    animate();

    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });

    // Theme Toggle Function
    function toggleTheme() {
        const body = document.documentElement;
        const currentTheme = body.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';

        body.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);

        // Update button
        const themeButton = document.getElementById('themeButton');
        const themeText = document.getElementById('themeText');

        if (newTheme === 'light') {
            themeButton.innerHTML = '<i class="fas fa-sun"></i> <span id="themeText">Dark Mode</span>';
            // Change particle colors for light mode
            particlesMaterial.color.setHex(0x667eea);
            globeMaterial.color.setHex(0x667eea);
            linesMaterial.color.setHex(0x764ba2);
        } else {
            themeButton.innerHTML = '<i class="fas fa-moon"></i> <span id="themeText">Light Mode</span>';
            // Change particle colors for dark mode
            particlesMaterial.color.setHex(0x00ffff);
            globeMaterial.color.setHex(0x00ffff);
            linesMaterial.color.setHex(0xff00ff);
        }
    }

    // Set initial theme from localStorage
    document.addEventListener('DOMContentLoaded', () => {
        const savedTheme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', savedTheme);

        const themeButton = document.getElementById('themeButton');

        if (savedTheme === 'light') {
            themeButton.innerHTML = '<i class="fas fa-sun"></i> <span id="themeText">Dark Mode</span>';
            particlesMaterial.color.setHex(0x667eea);
            globeMaterial.color.setHex(0x667eea);
            linesMaterial.color.setHex(0x764ba2);
        } else {
            themeButton.innerHTML = '<i class="fas fa-moon"></i> <span id="themeText">Light Mode</span>';
        }
    });
    </script>
{% include "includes/scroll_buttons.html" %}
</body>
</html>