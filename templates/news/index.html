<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load i18n %}
{% load static %}
{% get_current_language as LANGUAGE_CODE %}
{% get_available_languages as LANGUAGES %}
{% get_language_info_list for LANGUAGES as languages %}
    <div class="position-relative" style="margin-top:50px;">
      <div class="position-absolute top-0 end-0 translate-middle">
        <div class="container">
          <div class="row">
            <div class="col">
              <form action="{% url 'set_language' %}" method="POST">
                {% csrf_token %}
                {% comment %} <input name="next" type="hidden" value="{{ redirect_to }}"> {% endcomment %}
                <select class="form-select form-select-lg mb-3" aria-label=".form-select-lg example" name="language" onchange="this.form.submit()">
                  {% for language in languages %}
                  <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                    {{ language.name_local }}
                    {% if LANGUAGE_CODE == 'en' %}
                    <img src="https://ipapi.co/static/images/flags/us.png" />
                    {% else %}
                    <img src="https://ipapi.co/static/images/flags/{{LANGUAGE_CODE}}.png" />
                    {% endif %}
                  </option>
                  {% endfor %}
                </select>
              </form>
            </div>
            <div class="col-1">
              {% if LANGUAGE_CODE == 'en' %}
              <img style="object-fit: cover;" src="https://ipapi.co/static/images/flags/us.png" />
              {% else %}
              <img style="object-fit: cover;" src="https://ipapi.co/static/images/flags/{{LANGUAGE_CODE}}.png" />
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
</div>

<div class="fixed-top">
    <div class="position-relative">
        <div class="position-absolute end-0">
            <div class="C0mplexButton float-end">
                <a href="#" onclick="window.history.back(); return false;">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    X
                </a>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "e815a36ng3");
</script>
    <!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(90624869, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/90624869" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
    <!-- Yandex.RTB -->
<script>window.yaContextCb=window.yaContextCb||[]</script>
<script src="https://yandex.ru/ads/system/context.js" async></script>
<meta name="yandex-verification" content="6bd5e2cc7d84e7b1" />
<title>
    {% if id == 0 %}
        {% if request.LANGUAGE_CODE == 'uz' %}
            Yangiliklar
        {% else %}
        {% if request.LANGUAGE_CODE == 'ru' %}
            Новости
        {% else %}
            News
        {% endif %}
        {% endif %}
    {% else %}
        {% if request.LANGUAGE_CODE == 'uz' %}
            Yangiliklar {{news.name_uz_uz }}
        {% else %}
        {% if request.LANGUAGE_CODE == 'ru' %}
            Новости {{news.name_ru_ru }}
        {% else %}
            News {{news.name_en_us }}
        {% endif %}
        {% endif %}
    {% endif %}
</title>
<!-- <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4137874891184814"
 crossorigin="anonymous"></script> --> -->
 <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7773722896374259"
     crossorigin="anonymous"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8DHWL20H58"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8DHWL20H58');
</script>
        <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NW763C2');</script>
<!-- End Google Tag Manager -->
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyDpWaFi5QLTNc-yY0ieMKJtGOmbm2ofBm4",
    authDomain: "c0mplex.firebaseapp.com",
    projectId: "c0mplex",
    storageBucket: "c0mplex.appspot.com",
    messagingSenderId: "755681568857",
    appId: "1:755681568857:web:102b1b733df55baefe2948",
    measurementId: "G-H8XGTS4B9J"
  };

  // Initialize Firebase

  getAnalytics(initializeApp(firebaseConfig));
</script>
{% comment %} <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> {% endcomment %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"  rel="stylesheet">
<link rel="icon" sizes="16x16" href="/static/img/favicon.ico">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
{% if id == 0 %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">
{%endif%}
<link rel="stylesheet" href="/static/css/C0mplexButtonStyle.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js" integrity="sha512-pumBsjNRGGqkPzKHndZMaAG+bir374sORyzM3uulLV14lN5LyykqNk8eEeUlUkB3U0M4FApyaHraT65ihJhDpQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<style>
        /* Three.js Canvas Background - News Theme */
        #threejs-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: -1;
            opacity: 0.25;
        }

        .dark-mode #threejs-canvas {
            opacity: 0.35;
        }

        @media (max-width: 768px) {
            #threejs-canvas {
                opacity: 0.18;
            }
        }
    </style>

<style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --bg-color: #fafbfc;
            --text-color: #1a1a1a;
            --card-bg: rgba(255, 255, 255, 0.8);
            --border-color: rgba(255, 255, 255, 0.2);
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

      .dark-mode {
            --bg-color: #0f0f23;
            --text-color: #ffffff;
            --card-bg: rgba(30, 30, 46, 0.8);
            --border-color: rgba(255, 255, 255, 0.1);
            --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --glass-bg: rgba(30, 30, 46, 0.4);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
      }

      /* Theme switch tugmasi uchun stil */
      .theme-switch {
        position: fixed;
            top: 30px;
            right: 30px;
        z-index: 9999;
            padding: 12px 20px;
            border-radius: 50px;
        cursor: pointer;
            border: 1px solid var(--glass-border);
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            color: var(--text-color);
        outline: none;
            box-shadow: var(--card-shadow);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
            font-size: 14px;
      }

      .theme-switch:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
            background: var(--primary-gradient);
            color: white;
      }

      .theme-switch i {
        font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .theme-switch:hover i {
            transform: rotate(180deg);
        }

        /* Hero Section */
        .hero-section {
            background: var(--primary-gradient);
            padding: 80px 0 60px;
            margin-bottom: 50px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
            z-index: 0;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .hero-title {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 800;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .hero-subtitle {
            font-size: clamp(1.1rem, 3vw, 1.3rem);
            color: rgba(255, 255, 255, 0.9);
            font-weight: 400;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        /* News Cards */
        .project-item {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: var(--card-shadow);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            margin-bottom: 30px;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        .project-item:nth-child(1) { animation-delay: 0.1s; }
        .project-item:nth-child(2) { animation-delay: 0.2s; }
        .project-item:nth-child(3) { animation-delay: 0.3s; }
        .project-item:nth-child(4) { animation-delay: 0.4s; }
        .project-item:nth-child(5) { animation-delay: 0.5s; }

        .project-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--primary-gradient);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
            border-radius: 24px;
        }

        .project-item:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .project-item:hover::before {
            opacity: 0.05;
        }

        .project-info {
            position: relative;
            z-index: 2;
            padding: 2rem;
            background: transparent;
        }

        .project-info h1 {
            color: var(--text-color);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            line-height: 1.3;
            transition: all 0.3s ease;
        }

        .project-item:hover .project-info h1 {
            color: #ffffff;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            transform: translateY(-2px);
        }

        .project-info h2 {
            color: var(--text-color);
            opacity: 0.7;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .project-item:hover .project-info h2 {
            color: rgba(255, 255, 255, 0.9);
            opacity: 1;
            text-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
        }

        .project-info p {
            color: var(--text-color);
            opacity: 0.6;
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
        }

        .project-item:hover .project-info p {
            color: rgba(255, 255, 255, 0.8);
            opacity: 1;
        }

        .project-img {
            position: relative;
            z-index: 2;
            overflow: hidden;
            border-radius: 0 0 24px 24px;
        }

        .project-img img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        .project-item:hover .project-img img {
            transform: scale(1.05);
        }

        /* Section Title */
        .section-title {
            color: var(--text-color);
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 800;
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .section-title::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--accent-gradient);
            border-radius: 2px;
        }

        .section-title span {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInFromLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInFromRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-section {
                padding: 60px 0 40px;
            }
            
            .theme-switch {
                top: 20px;
                right: 20px;
                padding: 10px 16px;
                font-size: 13px;
            }
            
            .project-info {
                padding: 1.5rem;
            }
      }
</style>

<script>
  // Local Storage-da theme ni saqlash
  function setTheme(themeName) {
    localStorage.setItem('theme', themeName);
    document.body.classList.remove('light-mode', 'dark-mode');
    document.body.classList.add(themeName);
  }

  // Temani almashtirib beruvchi funksiya  
  function toggleTheme() {
    const button = document.querySelector('.theme-switch');
    const icon = button.querySelector('i');
    
    // Button animation
    button.style.transform = 'scale(0.95)';
    
    setTimeout(() => {
    if (document.body.classList.contains('dark-mode')){
      setTheme('light-mode');
        icon.className = 'bi bi-brightness-high';
    } else {
      setTheme('dark-mode');
        icon.className = 'bi bi-moon-fill';
    }
      button.style.transform = 'scale(1)';
    }, 150);
  }

  // Sahifa yuklanganda avvalgi tanlangan temani yuklash
  document.addEventListener('DOMContentLoaded', function() {
    if (localStorage.getItem('theme') === 'dark-mode') {
      setTheme('dark-mode');
      document.querySelector('.theme-switch i').className = 'bi bi-moon-fill';
    } else {
      setTheme('light-mode');
      document.querySelector('.theme-switch i').className = 'bi bi-brightness-high';
    }
    
    // Initialize animations
    initializeAnimations();
    initializeScrollEffects();
  });

  // Advanced scroll animations with Intersection Observer
  function initializeAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
                entry.target.classList.add('animate-in');
            }
        });
    }, observerOptions);

    // Observe all animated elements
    document.querySelectorAll('.project-item').forEach(el => {
        observer.observe(el);
    });
  }

  // Scroll effects
  function initializeScrollEffects() {
    let ticking = false;

    function updateScrollEffects() {
        const scrolled = window.pageYOffset;
        const parallax = document.querySelector('.hero-section');
        
        if (parallax) {
            const speed = scrolled * 0.5;
            parallax.style.transform = `translateY(${speed}px)`;
        }
        
        ticking = false;
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(updateScrollEffects);
            ticking = true;
        }
    }

    window.addEventListener('scroll', requestTick);
  }

  // Add ripple effect to buttons
  document.addEventListener('click', function(e) {
      if (e.target.matches('.theme-switch, .project-item, .C0mplexButton')) {
          const ripple = document.createElement('span');
          const rect = e.target.getBoundingClientRect();
          const size = Math.max(rect.width, rect.height);
          const x = e.clientX - rect.left - size / 2;
          const y = e.clientY - rect.top - size / 2;
          
          ripple.style.cssText = `
              position: absolute;
              width: ${size}px;
              height: ${size}px;
              left: ${x}px;
              top: ${y}px;
              background: rgba(255, 255, 255, 0.3);
              border-radius: 50%;
              transform: scale(0);
              animation: ripple 0.6s ease-out;
              pointer-events: none;
              z-index: 5;
          `;
          
          // Ensure parent has relative positioning
          if (getComputedStyle(e.target).position === 'static') {
              e.target.style.position = 'relative';
          }
          
          e.target.appendChild(ripple);
          
          setTimeout(() => {
              ripple.remove();
          }, 600);
      }
  });

  // Add CSS for ripple animation
  const style = document.createElement('style');
  style.textContent = `
      @keyframes ripple {
          to {
              transform: scale(4);
              opacity: 0;
          }
      }
      
      .animate-in {
          animation: slideInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      }
      
      @keyframes slideInUp {
          from {
              opacity: 0;
              transform: translateY(30px);
          }
          to {
              opacity: 1;
              transform: translateY(0);
          }
      }
  `;
  document.head.appendChild(style);
</script>
</head>
<body>
  <!-- Three.js Background Canvas - News Theme -->
  <canvas id="threejs-canvas"></canvas>

  <button onclick="toggleTheme()" class="theme-switch">
    <i class="bi bi-brightness-high"></i>
  </button>
<div class="fixed-top">
    <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-layout="in-article"
        data-ad-format="fluid"
        data-ad-client="ca-pub-7773722896374259"
        data-ad-slot="2303661293"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <!-- <!-- <ins class="adsbygoogle"
<!--     style="display:block; text-align:center;"
    data-ad-layout="in-article"
    data-ad-format="fluid"
    data-ad-client="ca-pub-4137874891184814"
    data-ad-slot="6832564320"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script> --> --> -->
    {% if id == 0 %}
      <!-- Projects Section -->
        <section id="projects">
            <div class="projects container">
            <div class="projects-header">
              <!-- Display 1 -->
              <ins class="adsbygoogle"
                style="display:block; text-align:center;"
                data-ad-client="ca-pub-7773722896374259"
                data-ad-slot="3869366477"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
              <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
                <!-- 2 chi abzast Mobil -->
                <!-- <!-- <ins class="adsbygoogle"
<!--                 style="display:block; text-align:center;"
                data-ad-client="ca-pub-4137874891184814"
                data-ad-slot="2646747626"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
                <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
                </script> --> --> -->
                
                {% if request.LANGUAGE_CODE == 'uz' %}
                <h1 class="section-title">Yangiliklar <span>Yangiliklar</span></h1>
                {% else %}
                {% if request.LANGUAGE_CODE == 'ru' %}
                <h1 class="section-title">Новости <span>Новости</span></h1>
                {% else %}
                <h1 class="section-title">News <span>News</span></h1>
                {% endif %}
                {% endif %}
                
            </div>
            <div class="all-projects">
                {%for item in news%}
                <div class="project-item">
                    {% if request.LANGUAGE_CODE == 'uz' %}
                    <div class="project-info">
                        <h1>{{item.name_uz_uz}}</h1>
                        <h2>{{item.title_uz_uz}}</h2>
                        <p>{{item.publish_time}}</p>
                        <div class="C0mplexButton Success">
                            <a href="/news?id={{item.id}}">
                                <span></span>
                                <span></span>
                                <span></span>
                                <span></span>
                                <i class="material-icons">&#9758;</i>
                                Kirish
                                <div class="spinner-border" role="status"></div>
                            </a>
                        </div>
                    </div>
                    {% else %}
                    {% if request.LANGUAGE_CODE == 'ru' %}
                    <div class="project-info">
                        <h1>{{item.name_ru_ru}}</h1>
                        <h2>{{item.title_ru_ru}}</h2>
                        <p>{{item.publish_time}}</p>
                        <div class="C0mplexButton Success">
                            <a href="/news?id={{item.id}}">
                                <span></span>
                                <span></span>
                                <span></span>
                                <span></span>
                                <i class="material-icons">&#9758;</i>
                                Входить
                                <div class="spinner-border" role="status"></div>
                            </a>
                        </div>
                    </div>
                    {% else %}
                    <div class="project-info">
                        <h1>{{item.name_en_us}}</h1>
                        <h2>{{item.title_en_us}}</h2>
                        <p>{{item.publish_time}}</p>
                        <div class="C0mplexButton Success">
                            <a href="/news?id={{item.id}}">
                                <span></span>
                                <span></span>
                                <span></span>
                                <span></span>
                                <i class="material-icons">&#9758;</i>
                                Enter
                                <div class="spinner-border" role="status"></div>
                            </a>
                        </div>
                    </div>
                    {% endif %}
                    {% endif %}
                <div class="project-img">
                    <img src="/media/{{item.image}}" alt="img">
                </div>
                </div>
                {%endfor%}
            </div>
            </div>
        </section>
    {% else %}
        <div class="container">
            <h1>
                <a href="https://play.google.com/store/apps/details?id=avtotest.complexprogrammer.uz" target="_blank">
                    {% if request.LANGUAGE_CODE == 'uz' %}
                    {{news.title_uz_uz }}
                    {% else %}
                    {% if request.LANGUAGE_CODE == 'ru' %}
                    {{news.title_ru_ru }}
                    {% else %}
                    {{news.title_en_us }}
                    {% endif %}
                    {% endif %}
                </a>
                <a href="https://play.google.com/store/apps/details?id=avtotest.complexprogrammer.uz" target="_blank">
                    <img src="/static/img/google-play.svg" />
                </a>
            </h1>
            <br/>
            <br/>
            <br/>
            {% if request.LANGUAGE_CODE == 'uz' %}
            {{news.body_uz_uz|safe }}
            {% else %}
            {% if request.LANGUAGE_CODE == 'ru' %}
            {{news.body_ru_ru|safe }}
            {% else %}
            {{news.body_en_us|safe }}
            {% endif %}
            {% endif %}
        </div>
    {% endif %}
    {% if id != 0 %}
    {% include 'comment_form.html' with comments=comments %}
    {% endif %}
    <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-format="autorelaxed"
        data-ad-client="ca-pub-7773722896374259"
        data-ad-slot="2479701367"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <!-- <!-- <ins class="adsbygoogle"
<!--     style="display:block; text-align:center;"
    data-ad-format="autorelaxed"
    data-ad-client="ca-pub-4137874891184814"
    data-ad-slot="4202531555"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script> --> --> -->
    <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-format="fluid"
        data-ad-layout-key="-an-4i-cp+a2+21k"
        data-ad-client="ca-pub-7773722896374259"
        data-ad-slot="4679993061"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <!-- <!-- <ins class="adsbygoogle"
<!--         style="display:block; text-align:center;"
        data-ad-format="fluid"
        data-ad-layout-key="-6t+ed+2i-1n-4w"
        data-ad-client="ca-pub-4137874891184814"
        data-ad-slot="7442938415"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script> --> --> -->
    <!-- Display 2 -->
    <ins class="adsbygoogle"
      style="display:block; text-align:center;"
      data-ad-client="ca-pub-7773722896374259"
      data-ad-slot="9722986318"
      data-ad-format="auto"
      data-full-width-responsive="true"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <!-- 1 chi abzast Mobil -->
    <!-- <!-- <ins class="adsbygoogle"
<!--         style="display:block; text-align:center;"
        data-ad-client="ca-pub-4137874891184814"
        data-ad-slot="2799587029"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script> --> --> -->

<script>
// Three.js Scene Setup for News Page - Information/Media Theme
let scene, camera, renderer, particles, newspaperPages = [], infoSpheres = [], mediaIcons = [];
let mouseX = 0, mouseY = 0;

function initThreeJS() {
    const canvas = document.getElementById('threejs-canvas');
    if (!canvas) return;

    scene = new THREE.Scene();

    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 50;

    renderer = new THREE.WebGLRenderer({
        canvas,
        alpha: true,
        antialias: true
    });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio);

    // Create particles (news dots/pixels)
    createNewsParticles();

    // Create newspaper pages
    createNewspaperPages();

    // Create info spheres (news bubbles)
    createInfoSpheres();

    // Create media icons
    createMediaIcons();

    // Add lights
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
    scene.add(ambientLight);

    const pointLight1 = new THREE.PointLight(0x667eea, 1.5, 100);
    pointLight1.position.set(20, 20, 20);
    scene.add(pointLight1);

    const pointLight2 = new THREE.PointLight(0xf093fb, 1.5, 100);
    pointLight2.position.set(-20, -20, 10);
    scene.add(pointLight2);

    const pointLight3 = new THREE.PointLight(0x4facfe, 1.5, 100);
    pointLight3.position.set(0, 15, -15);
    scene.add(pointLight3);

    // Mouse movement listener
    document.addEventListener('mousemove', (event) => {
        mouseX = (event.clientX / window.innerWidth) * 2 - 1;
        mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
    });

    // Window resize handler
    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });

    animate();
}

function createNewsParticles() {
    const geometry = new THREE.BufferGeometry();
    const vertices = [];
    const colors = [];

    for (let i = 0; i < 2500; i++) {
        vertices.push(
            Math.random() * 200 - 100,
            Math.random() * 200 - 100,
            Math.random() * 200 - 100
        );

        // News/Media colors: blue, purple, pink, cyan
        const colorOptions = [
            new THREE.Color(0x667eea), // Deep blue
            new THREE.Color(0xf093fb), // Pink
            new THREE.Color(0x4facfe), // Cyan
            new THREE.Color(0x764ba2), // Purple
            new THREE.Color(0xf5576c)  // Red
        ];
        const color = colorOptions[Math.floor(Math.random() * colorOptions.length)];
        colors.push(color.r, color.g, color.b);
    }

    geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
    geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));

    const material = new THREE.PointsMaterial({
        size: 0.7,
        vertexColors: true,
        transparent: true,
        opacity: 0.7,
        blending: THREE.AdditiveBlending
    });

    particles = new THREE.Points(geometry, material);
    scene.add(particles);
}

function createNewspaperPages() {
    // Create floating newspaper page shapes
    const pageConfigs = [
        { position: { x: -25, y: 15, z: -20 }, color: 0x667eea },
        { position: { x: 25, y: -15, z: -15 }, color: 0xf093fb },
        { position: { x: -20, y: -20, z: -25 }, color: 0x4facfe },
        { position: { x: 15, y: 20, z: -18 }, color: 0x764ba2 }
    ];

    pageConfigs.forEach((config) => {
        const pageGeometry = new THREE.PlaneGeometry(4, 5.5);
        const pageMaterial = new THREE.MeshPhongMaterial({
            color: config.color,
            transparent: true,
            opacity: 0.25,
            side: THREE.DoubleSide,
            shininess: 100
        });
        const page = new THREE.Mesh(pageGeometry, pageMaterial);

        page.position.set(config.position.x, config.position.y, config.position.z);
        page.rotation.x = Math.random() * Math.PI;
        page.rotation.y = Math.random() * Math.PI;

        page.userData = {
            rotationSpeed: {
                x: Math.random() * 0.01 + 0.002,
                y: Math.random() * 0.01 + 0.002,
                z: Math.random() * 0.008
            }
        };

        newspaperPages.push(page);
        scene.add(page);
    });
}

function createInfoSpheres() {
    // Create news bubble spheres
    const sphereConfigs = [
        { position: { x: -30, y: 10, z: -15 }, color: 0x667eea, size: 2 },
        { position: { x: 30, y: -10, z: -20 }, color: 0xf093fb, size: 1.5 },
        { position: { x: 0, y: 25, z: -25 }, color: 0x4facfe, size: 1.8 },
        { position: { x: -15, y: -25, z: -18 }, color: 0xf5576c, size: 1.6 }
    ];

    sphereConfigs.forEach((config) => {
        const sphereGeometry = new THREE.SphereGeometry(config.size, 32, 32);
        const sphereMaterial = new THREE.MeshPhongMaterial({
            color: config.color,
            transparent: true,
            opacity: 0.3,
            wireframe: true,
            shininess: 100
        });
        const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);

        sphere.position.set(config.position.x, config.position.y, config.position.z);

        sphere.userData = {
            rotationSpeed: {
                x: Math.random() * 0.015 + 0.005,
                y: Math.random() * 0.015 + 0.005
            },
            pulseSpeed: Math.random() * 0.02 + 0.01,
            pulsePhase: Math.random() * Math.PI * 2
        };

        infoSpheres.push(sphere);
        scene.add(sphere);
    });
}

function createMediaIcons() {
    // Create torus shapes representing media/broadcast
    const iconConfigs = [
        { position: { x: 22, y: 18, z: -22 }, color: 0x667eea },
        { position: { x: -22, y: -18, z: -15 }, color: 0xf093fb },
        { position: { x: 18, y: -22, z: -28 }, color: 0x4facfe }
    ];

    iconConfigs.forEach((config) => {
        const torusGeometry = new THREE.TorusGeometry(2, 0.5, 16, 100);
        const torusMaterial = new THREE.MeshPhongMaterial({
            color: config.color,
            transparent: true,
            opacity: 0.35,
            wireframe: true,
            shininess: 120
        });
        const torus = new THREE.Mesh(torusGeometry, torusMaterial);

        torus.position.set(config.position.x, config.position.y, config.position.z);

        torus.userData = {
            rotationSpeed: {
                x: Math.random() * 0.02,
                y: Math.random() * 0.02,
                z: Math.random() * 0.015
            }
        };

        mediaIcons.push(torus);
        scene.add(torus);
    });
}

function animate() {
    requestAnimationFrame(animate);

    const time = Date.now() * 0.001;

    // Rotate particles
    if (particles) {
        particles.rotation.y += 0.0008;
        particles.rotation.x += 0.0004;
    }

    // Animate newspaper pages
    newspaperPages.forEach((page) => {
        page.rotation.x += page.userData.rotationSpeed.x;
        page.rotation.y += page.userData.rotationSpeed.y;
        page.rotation.z += page.userData.rotationSpeed.z;
    });

    // Animate info spheres with pulse effect
    infoSpheres.forEach((sphere) => {
        sphere.rotation.x += sphere.userData.rotationSpeed.x;
        sphere.rotation.y += sphere.userData.rotationSpeed.y;

        const pulse = Math.sin(time * sphere.userData.pulseSpeed + sphere.userData.pulsePhase) * 0.2 + 1;
        sphere.scale.setScalar(pulse);
    });

    // Animate media icons
    mediaIcons.forEach((icon) => {
        icon.rotation.x += icon.userData.rotationSpeed.x;
        icon.rotation.y += icon.userData.rotationSpeed.y;
        icon.rotation.z += icon.userData.rotationSpeed.z;
    });

    // Gentle camera movement based on mouse
    camera.position.x += (mouseX * 3 - camera.position.x) * 0.03;
    camera.position.y += (mouseY * 3 - camera.position.y) * 0.03;
    camera.lookAt(scene.position);

    renderer.render(scene, camera);
}

// Initialize Three.js when DOM is loaded
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initThreeJS);
} else {
    initThreeJS();
}

// Update Three.js theme based on dark/light mode
function updateThreeJSTheme(theme) {
    if (!particles || !newspaperPages.length) return;

    if (theme === 'dark-mode') {
        particles.material.opacity = 0.6;
        newspaperPages.forEach(page => {
            page.material.opacity = 0.35;
        });
        infoSpheres.forEach(sphere => {
            sphere.material.opacity = 0.4;
        });
        mediaIcons.forEach(icon => {
            icon.material.opacity = 0.45;
        });
    } else {
        particles.material.opacity = 0.7;
        newspaperPages.forEach(page => {
            page.material.opacity = 0.25;
        });
        infoSpheres.forEach(sphere => {
            sphere.material.opacity = 0.3;
        });
        mediaIcons.forEach(icon => {
            icon.material.opacity = 0.35;
        });
    }
}

// Hook into existing theme toggle
const originalToggleTheme = window.toggleTheme;
if (originalToggleTheme) {
    window.toggleTheme = function() {
        originalToggleTheme();
        setTimeout(() => {
            const theme = document.body.classList.contains('dark-mode') ? 'dark-mode' : 'light-mode';
            updateThreeJSTheme(theme);
        }, 100);
    };
}
</script>

{% include "includes/scroll_buttons.html" %}

</body>
</html>